{"version":3,"file":"odo-helpers.min.js","sources":["../src/is-defined.js","../src/_animation-utils.js","../src/animation-classes.js","../src/noop.js","../src/animation-stepper.js","../src/box.js","../src/events.js","../src/closest.js","../src/coordinate.js","../src/defaults-to.js","../src/dom-loaded.js","../src/dom-ready.js","../src/even-heights.js","../src/on-transition-end.js","../src/_fade-element.js","../src/get-size.js","../src/_get-box.js","../src/get-margin-box.js","../src/get-ios-version.js","../src/get-number-option.js","../src/is-string.js","../src/get-string-option.js","../src/is-android-os.js","../src/is-edge.js","../src/is-chrome.js","../src/is-native-android.js","../src/is-ios.js","../src/rect.js","../src/_normalize-hash.js","../src/set-hash.js","../src/scroll-to.js","../src/timer.js","../src/cancel-transition-end.js","../src/capitalize.js","../src/cause-layout.js","../src/chunk.js","../src/clamp.js","../src/closest-greater-than.js","../src/closest-less-than.js","../src/fade-in-element.js","../src/fade-out-element.js","../src/force-redraw.js","../src/get-elements-size.js","../src/get-nth-sibling.js","../src/get-padding-box.js","../src/get-percentage-option.js","../src/get-relative-depth.js","../src/give-id.js","../src/has-scroll-events.js","../src/hyphenate.js","../src/is-ie.js","../src/on-animation-end.js","../src/pull.js","../src/random-string.js","../src/remove-children.js","../src/replace-with-hash.js","../src/swap-elements.js","../src/wrap-around-list.js"],"sourcesContent":["/**\n * @param {*} value Anything.\n * @return {boolean}\n */\nexport default function isDefined(value) {\n  return value !== undefined && value !== null;\n}\n","import isDefined from './is-defined';\n\nconst transitions = {};\nlet transitionId = 0;\n\n/**\n * Store a pending transition.\n * @param {HTMLElement} element Element which has the transitionend listener.\n * @param {number} timerId Timer id from setTimeout to cancel the transition.\n * @param {(evt: TransitionEvent) => void} listener Callback.\n * @return {number} Transition id.\n */\nexport function saveTransition(element, timerId, listener) {\n  transitionId += 1;\n  transitions[transitionId] = {\n    element,\n    timerId,\n    listener,\n  };\n  return transitionId;\n}\n\n/**\n * Remove a transition id from the stored list.\n * @param {number} transitionId Transition id to remove.\n */\nexport function clearTransition(transitionId) {\n  delete transitions[transitionId];\n}\n\n/**\n * Retrieve a transition object.\n * @param {number} transitionId Transition id to retrieve.\n * @return {{element: HTMLElement, timerId: number, listener: (evt: TransitionEvent) => void}}\n *   Transition object.\n */\nexport function getTransition(transitionId) {\n  return transitions[transitionId];\n}\n\n/**\n * Retrieve all transition objects.\n * @return {object}\n */\nexport function getTransitions() {\n  return transitions;\n}\n\n/**\n * Returns the element when the first parameter is a jQuery collection.\n * @param {HTMLElement|jQuery} elem An element or a jQuery collection.\n * @return {HTMLElement}\n * @throws {Error} If it's a jQuery collection of more than one element.\n */\nexport function getElement(elem) {\n  if (elem.jquery) {\n    if (elem.length > 1) {\n      throw new TypeError('This method only supports transition end for one element, not a collection');\n    }\n\n    return elem[0];\n  }\n\n  return elem;\n}\n\nexport function isOwnEvent(event) {\n  return event.target === event.currentTarget;\n}\n\nexport function isSameTransitionProperty(event, prop) {\n  return event.fake || !isDefined(prop) || event.propertyName === prop;\n}\n\nexport function getFakeEvent(elem) {\n  return {\n    target: elem,\n    currentTarget: elem,\n    fake: true,\n  };\n}\n","export default {\n  FADE: 'fade',\n  IN: 'in',\n  INVISIBLE: 'invisible',\n};\n","export default function noop() {}\n","/**\n * @fileoverview A simple class for providing a stepping function for each\n * animation frame over a given length of time. Uses requestAnimationFrame\n * where available. Its API is similar to the AnimationPlayer in `Element.animate`.\n *\n * Assumes `requestAnimationFrame`, `Function.prototype.bind`, and `Object.assign`\n * are available.\n *\n * @author Glen Cheney <glen@odopod.com>\n */\n\nimport noop from './noop';\n\nclass Stepper {\n  /**\n   * Easy animation stepper.\n   *\n   * @param {Object} [options] Options object.\n   * @param {number} [options.start] Starting number. Value to animate from.\n   * @param {number} [options.end] Ending number. Value to animate to.\n   * @param {function(number, number):void} [options.step] Step function which\n   *     will receive the step value and the current percentage completed.\n   * @param {number} [options.duration] Length of the animation. Default is 250ms.\n   * @param {Object} [options.context] The object scope to invoke the function in.\n   * @param {function(number):number} [options.easing] Easing function to apply.\n   * @constructor\n   */\n  constructor(options) {\n    this.options = Object.assign({}, Stepper.Defaults, options);\n\n    /**\n     * The percentage value which the scrubber and reveals will be animated to.\n     * @type {number}\n     * @private\n     */\n    this._animationAmount = this.options.end - this.options.start;\n\n    /**\n     * Time when the animation timer started.\n     * @type {number}\n     * @private\n     */\n    this._animationStart = +new Date();\n\n    this._handler = this._animateLoop.bind(this);\n\n    /**\n     * Called at the end of the animation with `options.context`.\n     * @type {function:void}\n     */\n    this.onfinish = noop;\n\n    // Start loop.\n    this._requestId = requestAnimationFrame(this._handler);\n  }\n\n  /**\n   * Internal loop ticker.\n   * @private\n   */\n  _animateLoop() {\n    const now = new Date().getTime();\n    const remainingTime = this._animationStart + this.options.duration - now;\n\n    // Even when duration is zero, this will result in Infinity, which will only\n    // call the step method once then onfinish, which is desired.\n    let percent = 1 - (remainingTime / this.options.duration);\n\n    // Abort if already at or past 100%.\n    if (percent >= 1) {\n      // Make sure it always finishes with 1.\n      this.options.step.call(this.options.context, this.options.end, 1);\n      this.onfinish.call(this.options.context);\n      this.dispose();\n      return;\n    }\n\n    // Apply easing.\n    percent = this.options.easing(percent);\n\n    // Request animation frame.\n    this._requestId = requestAnimationFrame(this._handler);\n\n    // Tick.\n    this.options.step.call(\n      this.options.context,\n      this.options.start + (this._animationAmount * percent), percent,\n    );\n  }\n\n  /**\n   * Stop the animation and dispose of it.\n   */\n  cancel() {\n    cancelAnimationFrame(this._requestId);\n    this.dispose();\n  }\n\n  /**\n   * Destroy the animation instance.\n   */\n  dispose() {\n    this._handler = null;\n    this.options.context = null;\n  }\n}\n\nStepper.Defaults = {\n  start: 0,\n  end: 1,\n  duration: 250,\n  step: noop,\n  context: window,\n  easing(k) {\n    return -0.5 * (Math.cos(Math.PI * k) - 1);\n  },\n};\n\nexport default Stepper;\n","export default class Box {\n  /**\n   * Class for representing a box. A box is specified as a top, right, bottom,\n   * and left. A box is useful for representing margins and padding.\n   * @param {number} top Top.\n   * @param {number} right Right.\n   * @param {number} bottom Bottom.\n   * @param {number} left Left.\n   * @constructor\n   */\n  constructor(top, right, bottom, left) {\n    /**\n     * Top\n     * @type {number}\n     */\n    this.top = top;\n\n    /**\n     * Right\n     * @type {number}\n     */\n    this.right = right;\n\n    /**\n     * Bottom\n     * @type {number}\n     */\n    this.bottom = bottom;\n\n    /**\n     * Left\n     * @type {number}\n     */\n    this.left = left;\n  }\n}\n","import OdoDevice from '@odopod/odo-device';\n\n/**\n * Returns the prefixed or unprefixed pointer event name or null if not pointer events.\n * @param {string} event The event name. e.g. \"pointerdown\".\n * @return {?string} The event name or null.\n */\nfunction getPointerEvent(event) {\n  /* istanbul ignore else */\n  if (OdoDevice.HAS_POINTER_EVENTS) {\n    return event;\n  }\n\n  /* istanbul ignore next */\n  return null;\n}\n\n/**\n * Returns a normalized transition end event name.\n *\n * Issue with Modernizr prefixing related to stock Android 4.1.2\n * That version of Android has both unprefixed and prefixed transitions\n * built in, but will only listen to the prefixed on in certain cases\n * https://github.com/Modernizr/Modernizr/issues/897\n *\n * @return {string} A patched transition end event name.\n */\nfunction getTransitionEndEvent() {\n  const div = document.createElement('div');\n  div.style.transitionProperty = 'width';\n\n  // Test the value which was just set. If it wasn't able to be set,\n  // then it shouldn't use unprefixed transitions.\n  /* istanbul ignore next */\n  if (div.style.transitionProperty !== 'width' && 'webkitTransition' in div.style) {\n    return 'webkitTransitionEnd';\n  }\n\n  return {\n    // Saf < 7, Android Browser < 4.4\n    WebkitTransition: 'webkitTransitionEnd',\n    transition: 'transitionend',\n  }[OdoDevice.Dom.TRANSITION];\n}\n\n/**\n * Returns a normalized animation end event name.\n * @return {string}\n */\nfunction getAnimationEndEvent() {\n  return {\n    WebkitAnimation: 'webkitAnimationEnd',\n    animation: 'animationend',\n  }[OdoDevice.Dom.ANIMATION];\n}\n\nconst events = {\n  // Mouse events\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  MOUSEDOWN: 'mousedown',\n  MOUSEUP: 'mouseup',\n  MOUSEOVER: 'mouseover',\n  MOUSEOUT: 'mouseout',\n  MOUSEMOVE: 'mousemove',\n\n  // IE, Safari, Chrome\n  SELECTSTART: 'selectstart',\n\n  // Key events\n  KEYPRESS: 'keypress',\n  KEYDOWN: 'keydown',\n  KEYUP: 'keyup',\n\n  // Focus\n  BLUR: 'blur',\n  FOCUS: 'focus',\n\n  // IE only\n  DEACTIVATE: 'deactivate',\n\n  FOCUSIN: 'focusin',\n  FOCUSOUT: 'focusout',\n\n  // Forms\n  CHANGE: 'change',\n  SELECT: 'select',\n  SUBMIT: 'submit',\n  INPUT: 'input',\n\n  // IE only\n  PROPERTYCHANGE: 'propertychange',\n\n  // Drag and drop\n  DRAGSTART: 'dragstart',\n  DRAG: 'drag',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DRAGLEAVE: 'dragleave',\n  DROP: 'drop',\n  DRAGEND: 'dragend',\n\n  // WebKit touch events.\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  TOUCHCANCEL: 'touchcancel',\n\n  // Misc\n  BEFOREUNLOAD: 'beforeunload',\n  CONTEXTMENU: 'contextmenu',\n  ERROR: 'error',\n  HELP: 'help',\n  LOAD: 'load',\n  LOSECAPTURE: 'losecapture',\n  READYSTATECHANGE: 'readystatechange',\n  RESIZE: 'resize',\n  SCROLL: 'scroll',\n  UNLOAD: 'unload',\n\n  // HTML 5 History events\n  // See http://www.w3.org/TR/html5/history.html#event-definitions\n  HASHCHANGE: 'hashchange',\n  PAGEHIDE: 'pagehide',\n  PAGESHOW: 'pageshow',\n  POPSTATE: 'popstate',\n\n  // Copy and Paste\n  // Support is limited. Make sure it works on your favorite browser\n  // before using.\n  // http://www.quirksmode.org/dom/events/cutcopypaste.html\n  COPY: 'copy',\n  PASTE: 'paste',\n  CUT: 'cut',\n  BEFORECOPY: 'beforecopy',\n  BEFORECUT: 'beforecut',\n  BEFOREPASTE: 'beforepaste',\n\n  // HTML5 online/offline events.\n  // http://www.w3.org/TR/offline-webapps/#related\n  ONLINE: 'online',\n  OFFLINE: 'offline',\n\n  // HTML 5 worker events\n  MESSAGE: 'message',\n  CONNECT: 'connect',\n\n  // Css transition events.\n  TRANSITIONEND: getTransitionEndEvent(),\n\n  ANIMATIONEND: getAnimationEndEvent(),\n\n  // Pointer events\n  POINTERCANCEL: getPointerEvent('pointercancel'),\n  POINTERDOWN: getPointerEvent('pointerdown'),\n  POINTERMOVE: getPointerEvent('pointermove'),\n  POINTEROVER: getPointerEvent('pointerover'),\n  POINTEROUT: getPointerEvent('pointerout'),\n  POINTERUP: getPointerEvent('pointerup'),\n};\n\nexport default events;\n","/**\n * Given an array of numbers (`arr`), find the item in the array closest\n * to a given number (`num`).\n *\n * @param  {Array.<number>} arr An array of numbers.\n * @param  {number} num Close number to search from.\n * @return {?number} The closest number in the array.\n */\nexport default function closest(arr, num) {\n  let closest = null;\n\n  arr.reduce((closestDiff, value) => {\n    const diff = Math.abs(value - num);\n    if (diff < closestDiff) {\n      closest = value;\n      return diff;\n    }\n\n    return closestDiff;\n  }, Infinity);\n\n  return closest;\n}\n","class Coordinate {\n  /**\n   * Class for representing coordinates and positions.\n   * @param {number} [x=0] Left, defaults to 0.\n   * @param {number} [y=0] Top, defaults to 0.\n   * @constructor\n   */\n  constructor(x = 0, y = 0) {\n    /**\n     * X-value\n     * @type {number}\n     */\n    this.x = x;\n\n    /**\n     * Y-value\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * Returns a duplicate of this coordinate.\n   * @return {Coordinate}\n   */\n  clone() {\n    return new Coordinate(this.x, this.y);\n  }\n\n  /**\n   * Scales this coordinate by the given scale factors. The x and y values are\n   * scaled by {@code sx} and {@code optSy} respectively.  If {@code optSy}\n   * is not given, then {@code sx} is used for both x and y.\n   * @param {number} sx The scale factor to use for the x dimension.\n   * @param {number=} optSy The scale factor to use for the y dimension.\n   * @return {!Coordinate} This coordinate after scaling.\n   */\n  scale(sx, optSy = sx) {\n    this.x *= sx;\n    this.y *= optSy;\n    return this;\n  }\n\n  /**\n   * Translates this box by the given offsets. If a {@code Coordinate}\n   * is given, then the x and y values are translated by the coordinate's x and y.\n   * Otherwise, x and y are translated by {@code tx} and {@code opt_ty}\n   * respectively.\n   * @param {number|Coordinate} tx The value to translate x by or the\n   *     the coordinate to translate this coordinate by.\n   * @param {number} [ty] The value to translate y by.\n   * @return {!Coordinate} This coordinate after translating.\n   */\n  translate(tx, ty) {\n    if (tx instanceof Coordinate) {\n      this.x += tx.x;\n      this.y += tx.y;\n    } else {\n      this.x += tx;\n      this.y += ty;\n    }\n\n    return this;\n  }\n\n  /**\n   * Compares coordinates for equality.\n   * @param {Coordinate} a A Coordinate.\n   * @param {Coordinate} b A Coordinate.\n   * @return {boolean} True iff the coordinates are equal, or if both are null.\n   */\n  static equals(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (!a || !b) {\n      return false;\n    }\n\n    return a.x === b.x && a.y === b.y;\n  }\n\n  /**\n   * Returns the distance between two coordinates.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {!Coordinate} b A Coordinate.\n   * @return {number} The distance between {@code a} and {@code b}.\n   */\n  static distance(a, b) {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  /**\n   * Returns the difference between two coordinates as a new Coordinate.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {!Coordinate} b A Coordinate.\n   * @return {!Coordinate} A Coordinate representing the difference\n   *     between {@code a} and {@code b}.\n   */\n  static difference(a, b) {\n    return new Coordinate(a.x - b.x, a.y - b.y);\n  }\n\n  /**\n   * Returns the sum of two coordinates as a new Coordinate.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {!Coordinate} b A Coordinate.\n   * @return {!Coordinate} A Coordinate representing the sum of the two coordinates.\n   */\n  static sum(a, b) {\n    return new Coordinate(a.x + b.x, a.y + b.y);\n  }\n\n  /**\n   * Returns the product of two coordinates as a new Coordinate.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {!Coordinate} b A Coordinate.\n   * @return {!Coordinate} A Coordinate representing the product of the two coordinates.\n   */\n  static product(a, b) {\n    return new Coordinate(a.x * b.x, a.y * b.y);\n  }\n\n  /**\n   * Returns the quotient of two coordinates as a new Coordinate.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {!Coordinate} b A Coordinate.\n   * @return {!Coordinate} A Coordinate representing the quotient of the two coordinates.\n   */\n  static quotient(a, b) {\n    return new Coordinate(a.x / b.x, a.y / b.y);\n  }\n\n  /**\n   * Scales this coordinate by the given scale factors. This does not affect the\n   * properites of the coordinate parameter.\n   * @param {!Coordinate} a A Coordinate.\n   * @param {number} sx The scale factor to use for the x dimension.\n   * @param {number=} optSy The scale factor to use for the y dimension.\n   * @return {!Coordinate} This coordinate after scaling.\n   */\n  static scale(a, sx, optSy = sx) {\n    return new Coordinate(a.x * sx, a.y * optSy);\n  }\n}\n\nexport default Coordinate;\n","import isDefined from './is-defined';\n\n/**\n * Fallback to a specified default if an input is undefined or null.\n * @param {*} obj The input to test.\n * @param {*} defaultValue The fallback if the input is undefined.\n * @param {boolean=} test If defined, `test` will be used to determine which\n *     value should be used.\n * @return {*} The sanitized output, either `obj` or `defaultValue`.\n */\nexport default function defaultsTo(obj, defaultValue, test = isDefined(obj)) {\n  return test ? obj : defaultValue;\n}\n","/**\n * Returns a promise which resolves when the window load event is fired, or\n * one which resolves immediately if that has already happened.\n * @type {Promise<void>}\n */\nexport default new Promise((resolve) => {\n  /* istanbul ignore if */\n  if (document.readyState === 'complete') {\n    resolve();\n  } else {\n    window.addEventListener('load', function complete() {\n      window.removeEventListener('load', complete);\n      resolve();\n    });\n  }\n});\n","/**\n * Returns a promise which resolves when the DOMContentLoaded event is fired, or\n * one which resolves immediately if that has already happened.\n * @type {Promise<void>}\n */\nexport default new Promise((resolve) => {\n  /* istanbul ignore if */\n  if (document.readyState === 'interactive') {\n    resolve();\n  } else {\n    document.addEventListener('DOMContentLoaded', function ready() {\n      document.removeEventListener('DOMContentLoaded', ready);\n      resolve();\n    });\n  }\n});\n","/**\n * Determine which element in an array is the tallest.\n * @param {ArrayLike<HTMLElement>} elements Array-like of elements.\n * @return {number} Height of the tallest element.\n */\nfunction getTallest(elements) {\n  let tallest = 0;\n\n  for (let i = elements.length - 1; i >= 0; i--) {\n    if (elements[i].offsetHeight > tallest) {\n      tallest = elements[i].offsetHeight;\n    }\n  }\n\n  return tallest;\n}\n\n/**\n * Set the height of every element in an array to a value.\n * @param {ArrayLike<HTMLElement>} elements Array-like of elements.\n * @param {string} height Height value to set.\n */\nfunction setAllHeights(elements, height) {\n  for (let i = elements.length - 1; i >= 0; i--) {\n    elements[i].style.height = height;\n  }\n}\n\n/**\n * For groups of elements which should be the same height. Using this method\n * will create far less style recalculations and layouts.\n * @param {ArrayLike.<HTMLElement>|ArrayLike.<ArrayLike.<HTMLElement>>} groups An\n *     array-like collection of an array-like collection of elements.\n * @return {number|Array.<number>} An array containing the pixel value of the\n *     tallest element for each group, or just a number if it's one group.\n */\nexport default function evenHeights(groups) {\n  let list = Array.from(groups);\n\n  // If the first item in the list is an element, then it needs to be wrapped\n  // in an array so the rest of the methods will work.\n  let isGroup = true;\n  if (list[0] && list[0].nodeType) {\n    isGroup = false;\n    list = [list];\n  }\n\n  // First, reset the height for every element.\n  // This is done first, otherwise we dirty the DOM on each loop!\n  list.forEach((elements) => {\n    setAllHeights(elements, '');\n  });\n\n  // Now, measure heights in each group and save the tallest value. Instead of\n  // setting the height value for the entire group, save it. If it were set,\n  // the next iteration in the loop would have to recalculate styles in the DOM\n  const tallests = list.map(elements => getTallest(elements));\n\n  // Lastly, set them all.\n  list.forEach((elements, i) => {\n    setAllHeights(elements, tallests[i] + 'px');\n  });\n\n  if (isGroup) {\n    return tallests;\n  }\n  return tallests[0];\n}\n","import OdoDevice from '@odopod/odo-device';\nimport events from './events';\nimport {\n  clearTransition,\n  getElement,\n  getFakeEvent,\n  isOwnEvent,\n  isSameTransitionProperty,\n  saveTransition,\n} from './_animation-utils';\n\nexport default function onTransitionEnd(\n  elem,\n  fn,\n  context = window,\n  property = null,\n  timeout = null,\n) {\n  const element = getElement(elem);\n\n  const callback = fn.bind(context);\n  let timerId;\n\n  /**\n   * @param {TransitionEvent|{target: Element, currentTarget: Element}} evt Event object.\n   */\n\n  function transitionEnded(evt) {\n    // Some other element's transition event could have bubbled up to this.\n    // or\n    // If the optional property exists and it's not the property which was\n    // transitioned, exit out of the function and continue waiting for the\n    // right transition property.\n    if (!isOwnEvent(evt) || !isSameTransitionProperty(evt, property)) {\n      return;\n    }\n\n    // Remove from active transitions.\n    clearTransition(transitionId); // eslint-disable-line no-use-before-define\n\n    // If the browser has transitions, there will be a listener bound to the\n    // `transitionend` event which needs to be removed.\n    if (OdoDevice.HAS_TRANSITIONS) {\n      evt.currentTarget.removeEventListener(events.TRANSITIONEND, transitionEnded);\n    }\n\n    // Done!\n    callback(evt);\n    clearTimeout(timerId);\n  }\n\n  if (OdoDevice.HAS_TRANSITIONS) {\n    element.addEventListener(events.TRANSITIONEND, transitionEnded);\n\n    // Sometimes the transition end event doesn't fire, usually when\n    // properties don't change or when iOS decides to just snap instead of\n    // transition. To get around this, a timer is set which will trigger the\n    // fake event.\n    if (timeout) {\n      timerId = setTimeout(() => {\n        transitionEnded(getFakeEvent(element));\n      }, timeout);\n    }\n  } else {\n    // Push to the end of the queue with a fake event which will pass the checks\n    // inside the callback function.\n    timerId = setTimeout(() => {\n      transitionEnded(getFakeEvent(element));\n    }, 0);\n  }\n\n  // Save this active transition end listener so it can be canceled.\n  const transitionId = saveTransition(element, timerId, transitionEnded);\n\n  // Return id used to cancel the transition end listener, similar to setTimeout\n  // and requestAnimationFrame.\n  return transitionId;\n}\n","import noop from './noop';\nimport Classes from './animation-classes';\nimport {\n  getElement,\n  getFakeEvent,\n} from './_animation-utils';\nimport onTransitionEnd from './on-transition-end';\n\n/**\n * Fade out an element and then set visibilty hidden on it.\n * @param {Element} elem Element to fade.\n * @param {boolean} [isOut] Whether to fade out or in.\n * @param {Function} [fn=noop] Callback function when faded out.\n * @param {Window|HTMLElement} [context=window] Context for the callback.\n * @param {boolean} [invisible=false] Whether to add visibility:hidden to the\n *     element once it has faded out. Defaults to false.\n * @return {number} id used to cancel the transition end listener.\n */\nexport default function fadeElement(\n  elem,\n  isOut,\n  fn = noop,\n  context = window,\n  invisible = false,\n) {\n  const element = getElement(elem);\n\n  // Bind the context to the callback here so that the context and function\n  // references can be garbage collected and the only things left are `callback`\n  // and `invisible`.\n  const callback = fn.bind(context);\n\n  // Make sure the transition will actually happen.\n  // isIn and has `in` and `fade` classes or\n  // isIn but doesn't have `fade` or\n  // isOut and has `fade`, but doesn't have `in` class.\n  const hasIn = element.classList.contains(Classes.IN);\n  const hasFade = element.classList.contains(Classes.FADE);\n  if ((!isOut && hasIn && hasFade) ||\n    (!isOut && !hasFade) ||\n    (isOut && !hasIn && hasFade)) {\n    const fakeEvent = getFakeEvent(element);\n\n    // This is expected to be async.\n    setTimeout(() => {\n      callback(fakeEvent);\n    }, 0);\n\n    return 0;\n  }\n\n  /**\n   * Internal callback when the element has finished its transition.\n   * @param {{target: Element, currentTarget: Element}} evt Event object.\n   */\n  function faded(evt) {\n    // Element has faded out, add invisible class.\n    if (isOut && invisible) {\n      evt.currentTarget.classList.add(Classes.INVISIBLE);\n    }\n\n    callback(evt);\n  }\n\n  // Fading in, remove invisible class.\n  if (!isOut && invisible) {\n    elem.classList.remove(Classes.INVISIBLE);\n  }\n\n  // Make sure it has the \"fade\" class. It won't do anything if it already does.\n  elem.classList.add(Classes.FADE);\n\n  // Remove (or add) the \"in\" class which triggers the transition.\n  // If the element had neither of these classes, adding the \"fade\" class\n  // will trigger the transition.\n  elem.classList.toggle(Classes.IN, !isOut);\n\n  return onTransitionEnd(elem, faded, null, 'opacity');\n}\n","/**\n * Gets the height and with of an element when the display is not none.\n * @param {HTMLElement} element Element to get size of.\n * @return {!{width: number, height: number}} Object with width/height.\n */\nexport default function getSize(element) {\n  return {\n    width: element.offsetWidth,\n    height: element.offsetHeight,\n  };\n}\n","import Box from './box';\n\n/**\n * Parse string to return numerical value.\n * @param {string} value String of number\n * @return {number} Numerical value or 0 if parseFloat returns NaN\n */\nfunction getFloat(value) {\n  return parseFloat(value) || 0;\n}\n\nexport default function getBox(element, property) {\n  const props = window.getComputedStyle(element, null);\n  return new Box(\n    getFloat(props[property + 'Top']),\n    getFloat(props[property + 'Right']),\n    getFloat(props[property + 'Bottom']),\n    getFloat(props[property + 'Left']),\n  );\n}\n","import getBox from './_get-box';\n\nexport default function getMarginBox(element) {\n  return getBox(element, 'margin');\n}\n","/**\n * Detects the version of iOS operating system.\n * @param {string} userAgent The user agent string.\n * @return {number} iOS version. iOS 8.4.0, for example, will return `840`.\n */\nexport default function getIOSVersion(userAgent) {\n  const iosUserAgent = userAgent.match(/OS\\s+([\\d_]+)/i);\n  const iosVersion = iosUserAgent[1].split('_');\n\n  // The iOS ua string doesn't include the patch version if it's zero.\n  if (iosVersion.length === 2) {\n    iosVersion[2] = '0';\n  }\n\n  return parseInt(iosVersion.reduce((str, number) => str + number, ''), 10);\n}\n","import defaultsTo from './defaults-to';\n\n/**\n * Parse a value as a number. If it's not numeric, then the default value will\n * be returned.\n * @param {*} value The option.\n * @param {*} defaultValue The fallback value.\n * @return {*} If value is numeric, value, else defaultValue.\n */\nexport default function getNumberOption(value, defaultValue) {\n  const number = parseFloat(value);\n  return defaultsTo(number, defaultValue, !Number.isNaN(number));\n}\n","/**\n * @param {*} value Anything.\n * @return {boolean}\n */\nexport default function isString(value) {\n  return typeof value === 'string';\n}\n","import defaultsTo from './defaults-to';\nimport isString from './is-string';\n\n/**\n * Parse a value as a string. If it's not a string, then the default value\n * will be returned.\n * @param {*} value The option.\n * @param {*} defaultValue The fallback value.\n * @return {*} If value is a string, value, else defaultValue.\n */\nexport default function getStringOption(value, defaultValue) {\n  return defaultsTo(value, defaultValue, isString(value));\n}\n","/**\n * Detects the native Android Operating System.\n * @param {string} userAgent The user agent string.\n * @return {boolean}\n */\nexport default function isAndroidOS(userAgent) {\n  return userAgent.includes('Mozilla/5.0') && userAgent.includes('Android ');\n}\n","/**\n * Check for Microsoft Edge string.\n * @param {string} userAgent The user agent string.\n * @return {boolean}\n */\nexport default function isEdge(userAgent) {\n  return userAgent.includes('Edge/');\n}\n","import isEdge from './is-edge';\n\n/**\n * Detects all Google Chrome browsers.\n * @param {string} userAgent The user agent string.\n * @return {boolean}\n */\nexport default function isChrome(userAgent) {\n  return !isEdge(userAgent) && userAgent.includes('Chrome');\n}\n","import isAndroidOS from './is-android-os';\nimport isChrome from './is-chrome';\n\n/**\n * Whether the give user agent is from the stock Android browser.\n * @param {string} userAgent User agent string.\n * @return {boolean}\n */\nexport default function isNativeAndroid(userAgent) {\n  return isAndroidOS(userAgent) && !isChrome(userAgent);\n}\n","/**\n * Detects the iOS operating system.\n * @param {string} userAgent  The user agent string.\n * @return {boolean}\n */\nexport default function isIOS(userAgent) {\n  return /(iPad|iPhone|iPod)/g.test(userAgent);\n}\n","export default class Rect {\n  /**\n   * Class for representing rectangular regions.\n   * @param {number} x Left.\n   * @param {number} y Top.\n   * @param {number} w Width.\n   * @param {number} h Height.\n   * @constructor\n   */\n  constructor(x, y, w, h) {\n    /**\n     * Left\n     * @type {number}\n     */\n    this.left = x;\n\n    /**\n     * Top\n     * @type {number}\n     */\n    this.top = y;\n\n    /**\n     * Width\n     * @type {number}\n     */\n    this.width = w;\n\n    /**\n     * Height\n     * @type {number}\n     */\n    this.height = h;\n  }\n\n  /**\n   * Right\n   * @type {number}\n   */\n  get right() {\n    return this.left + this.width;\n  }\n\n  /**\n   * Bottom\n   * @type {number}\n   */\n  get bottom() {\n    return this.top + this.height;\n  }\n\n  /**\n   * Returns whether two rectangles intersect. Two rectangles intersect if they\n   * touch at all, for example, two zero width and height rectangles would\n   * intersect if they had the same top and left.\n   * @param {Rect} a A Rectangle.\n   * @param {Rect} b A Rectangle.\n   * @return {boolean} Whether a and b intersect.\n   */\n  static intersects(a, b) {\n    return (a.left <= b.right && b.left <= a.right &&\n      a.top <= b.bottom && b.top <= a.bottom);\n  }\n}\n","/* istanbul ignore next */\nexport default function normalizeHash(hash) {\n  if (typeof hash !== 'string') {\n    throw new Error('Hash must be of type string');\n  } else {\n    return hash.replace(/^#/, '');\n  }\n}\n","import normalizeHash from './_normalize-hash';\n\n/**\n * Updates the browser's hash\n * @param {string} newHash New hash, without `#`\n */\nexport default function setHash(newHash) {\n  const hash = normalizeHash(newHash);\n  let st;\n\n  // When resetting the hash with `''`, the page will scroll back to the top,\n  // so we cache the current scroll position.\n  if (!hash) {\n    st = window.pageYOffset;\n  }\n\n  window.location.hash = hash;\n\n  // Scroll back to the position from before.\n  if (!hash) {\n    window.scrollTo(0, st);\n  }\n}\n","import noop from './noop';\nimport Stepper from './animation-stepper';\n\n/**\n * Scroll the page to a destination.\n * @param {number} [position] End scroll position.\n * @param {number} [duration] Duration in milliseconds.\n * @param {function:void} [callback] Optional callback.\n * @param {function(number):number} [easing] Easing function.\n */\nexport default function scrollTo(\n  position = 0,\n  duration = 400,\n  callback = noop,\n  easing = undefined,\n) {\n  const options = {\n    start: window.pageYOffset,\n    end: position,\n    duration,\n    step(scrollTop) {\n      window.scrollTo(0, scrollTop);\n    },\n  };\n\n  // Avoid setting `easing` to `undefined`.\n  if (typeof easing === 'function') {\n    options.easing = easing;\n  }\n\n  const anim = new Stepper(options);\n  anim.onfinish = callback;\n  return anim;\n}\n","class Timer {\n  /**\n   * A simple timer class. The timer does not start automatically when\n   * initialized.\n   * @param {Function} fn Callback for when the timer expires.\n   * @param {number} delay Timer length in milliseconds.\n   * @param {boolean} [continuous] If true, the timer will automatically\n   *     restart itself when it expires.\n   * @constructor\n   */\n  constructor(fn, delay, continuous = false) {\n    this.timerId = null;\n    this.startTime = null;\n    this.isPaused = false;\n    this.isTicking = false;\n    this.isContinuous = continuous;\n    this.delay = delay;\n    this.remaining = delay;\n    this.fn = fn;\n\n    this.resume = this.start;\n    this.pause = this.stop;\n  }\n\n  /**\n   * Starts ticking the timer.\n   * @return {number|boolean} The remaining time or false if the timer is\n   *     already ticking.\n   */\n  start() {\n    if (this.isTicking) {\n      return false;\n    }\n\n    this.startTime = Date.now();\n    this.timerId = setTimeout(() => {\n      this.fn();\n\n      // If the timer wasn't stopped in the callback and this is a continuous\n      // timer, start it again.\n      if (!this.isPaused && this.isContinuous) {\n        this.restart();\n      } else {\n        this.reset();\n      }\n    }, this.remaining);\n    this.isTicking = true;\n    this.isPaused = false;\n    return this.remaining;\n  }\n\n  /**\n   * Pauses the timer. Resuming will continue it with the remaining time.\n   * @return {number} Time remaining.\n   */\n  stop() {\n    this.clear();\n    this.remaining -= Date.now() - this.startTime;\n    this.isPaused = true;\n    this.isTicking = false;\n    return this.remaining;\n  }\n\n  /**\n   * Sets time remaining to initial delay and clears timer.\n   */\n  reset() {\n    this.remaining = this.delay;\n    this.clear();\n  }\n\n  /**\n   * Resets the timer to the original delay, clears the current timer, and\n   * starts the timer again.\n   */\n  restart() {\n    this.reset();\n    this.resume();\n  }\n\n  /**\n   * Clears timer.\n   */\n  clear() {\n    clearTimeout(this.timerId);\n    this.isPaused = false;\n    this.isTicking = false;\n  }\n\n  /**\n   * Destroy the timer.\n   */\n  dispose() {\n    this.clear();\n    this.fn = null;\n  }\n}\n\nexport default Timer;\n","import OdoDevice from '@odopod/odo-device';\nimport events from './events';\nimport { clearTransition, getTransition } from './_animation-utils';\n\n/**\n * Remove the event listener for `transitionend`.\n * @param {number} id The number returned by `onTransitionEnd`.\n * @return {boolean} Whether the transition was canceled or not. If the transition\n *     already finished, this method will return false.\n */\nexport default function cancelTransitionEnd(id) {\n  const obj = getTransition(id);\n\n  if (obj) {\n    clearTimeout(obj.timerId);\n\n    if (OdoDevice.HAS_TRANSITIONS) {\n      obj.element.removeEventListener(events.TRANSITIONEND, obj.listener);\n    }\n\n    clearTransition(id);\n    return true;\n  }\n  return false;\n}\n","/**\n * Capitalize a string.\n * @param {string} str String to capitalize.\n * @return {string} Capitalized string.\n */\nexport default function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","/**\n * Ask the browser for a property that will cause it to recalculate styles\n * and layout the element (and possibly surrounding/parent elements).\n * @param {HTMLElement} element Element to for a layout for.\n * @return {number} Width of the element. If you actually need the width of\n *     element, use the `style.getSize` method.\n */\nexport default function causeLayout(element) {\n  return element.offsetWidth;\n}\n","/**\n * Make an array of smaller arrays from an array.\n * @param {Array.<*>} array An array to take chunks from.\n * @param {number} size The number of items per chunk.\n * @return {Array.<Array.<*>>}\n */\nexport default function chunk(array, size) {\n  if (!size) {\n    return [];\n  }\n\n  const numArrays = Math.ceil(array.length / size);\n  const chunked = new Array(numArrays);\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0, index = 0; i < numArrays; index += size, i++) {\n    chunked[i] = array.slice(index, index + size);\n  }\n\n  return chunked;\n}\n","/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport default function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n","import closest from './closest';\n\n/**\n * Given an array of numbers (`arr`), find the item in the array closest\n * to a given number (`num`), while also greater than (`num`).\n *\n * @param  {Array.<number>} arr An array of numbers.\n * @param  {number} num Close number to search from.\n * @return {?number} The closest number in the array.\n */\nexport default function closestGreaterThan(arr, num) {\n  return closest(arr.filter(value => value > num), num);\n}\n","import closest from './closest';\n\n/**\n * Given an array of numbers (`arr`), find the item in the array closest\n * to a given number (`num`), while also less than (`num`).\n *\n * @param  {Array.<number>} arr An array of numbers.\n * @param  {number} num Close number to search from.\n * @return {?number} The closest number in the array.\n */\nexport default function closestLessThan(arr, num) {\n  return closest(arr.filter(value => value < num), num);\n}\n","import fadeElement from './_fade-element';\n\n/**\n * Fade in an element and optionally remove a class which sets visibility\n * to hidden.\n * @param {Element} elem Element to fade.\n * @param {Function} [fn=noop] Callback function when faded out.\n * @param {Window|HTMLElement} [context=window] Context for the callback.\n * @param {boolean} [invisible=false] Whether to add visibility:hidden to the\n *     element once it has faded. Defaults to false.\n */\nexport default function fadeInElement(elem, fn, context, invisible) {\n  return fadeElement(elem, false, fn, context, invisible);\n}\n","import fadeElement from './_fade-element';\n\n/**\n * Fade in an element and optionally add a class which sets visibility\n * to hidden.\n * @param {Element} elem Element to fade.\n * @param {Function} [fn=noop] Callback function when faded out.\n * @param {Window|HTMLElement} [context=window] Context for the callback.\n * @param {boolean} [invisible=false] Whether to add visibility:hidden to the\n *     element once it has faded. Defaults to false.\n */\nexport default function fadeOutElement(elem, fn, context, invisible) {\n  return fadeElement(elem, true, fn, context, invisible);\n}\n","/**\n * Force the page to be repainted.\n */\nexport default function forceRedraw() {\n  const tempStyleSheet = document.createElement('style');\n  document.body.appendChild(tempStyleSheet);\n  document.body.removeChild(tempStyleSheet);\n}\n","import getSize from './get-size';\nimport getMarginBox from './get-margin-box';\n\n/**\n * Returns the size (width or height) of a list of elements, including margins.\n * @param {HTMLElement[]} elements An array of child elements (not a NodeList).\n * @param {string} dimension `'width'` or `'height'`.\n * @return {number}\n */\nexport default function getElementsSize(elements, dimension) {\n  return elements.reduce((memo, el) => {\n    const outerSize = getSize(el)[dimension];\n    const margins = getMarginBox(el);\n    const marginSize = dimension === 'height' ?\n      margins.top + margins.bottom :\n      margins.left + margins.right;\n\n    return memo + outerSize + marginSize;\n  }, 0);\n}\n","/**\n * Retrieves the nth sibling of an element, or null if the would be nth sibling\n * does not exist. Heads up! This function excludes text nodes.\n * @param {Element} node Element to start looking from.\n * @param {number} n An integer representing the desired element relative to\n *     `node`. For example, `2` would look for `node.nextSibling.nextSibling`.\n * @param {boolean=} optIsForward Whether to look forwards or backwards. Default is true.\n * @return {?Element} The nth sibling or null.\n */\nexport default function getNthSibling(node, n, optIsForward) {\n  const isForward = optIsForward !== false;\n  let siblingCount = 0;\n  let sibling = node;\n  do {\n    sibling = isForward ?\n      sibling.nextElementSibling :\n      sibling.previousElementSibling;\n    siblingCount += 1;\n  } while (sibling && siblingCount < n);\n  return sibling;\n}\n","import getBox from './_get-box';\n\nexport default function getPaddingBox(element) {\n  return getBox(element, 'padding');\n}\n","import isString from './is-string';\nimport getStringOption from './get-string-option';\nimport getNumberOption from './get-number-option';\n\n/**\n * Parse a value as a percentage. If it's a string with '%' in it, it will\n * be parsed as a string, otherwise it will be parsed as a number.\n * @param {*} value The option.\n * @param {*} defaultValue The fallback value.\n * @return {*}\n */\nexport default function getPercentageOption(value, defaultValue) {\n  if (isString(value) && value.indexOf('%') > -1) {\n    return getStringOption(value, defaultValue);\n  }\n\n  return getNumberOption(value, defaultValue);\n}\n","/**\n * Ripped from: goog.testing.editor.dom.getRelativeDepth_.\n *\n * Returns the depth of the given node relative to the given parent node, or -1\n * if the given node is not a descendant of the given parent node. E.g. if\n * node == parentNode returns 0, if node.parentNode == parentNode returns 1,\n * etc.\n * @param {Node} node Node whose depth to get.\n * @param {Node} parentNode Node relative to which the depth should be\n *     calculated.\n * @return {number} The depth of the given node relative to the given parent\n *     node, or -1 if the given node is not a descendant of the given parent\n *     node.\n */\nexport default function getRelativeDepth(node, parentNode) {\n  let depth = 0;\n  let child = node;\n  while (child) {\n    if (child === parentNode) {\n      return depth;\n    }\n\n    child = child.parentNode;\n    depth += 1;\n  }\n\n  return -1;\n}\n","/**\n * Set an id on an element if one doesn't exist.\n * @param {Element} element Element to give an id.\n * @param {string|function(): string} fn Returns an id to set.\n */\nexport default function giveId(element, fn) {\n  if (!element.id) {\n    element.id = typeof fn === 'function' ? fn() : fn;\n  }\n}\n","import isNativeAndroid from './is-native-android';\nimport isIOS from './is-ios';\nimport getIOSVersion from './get-ios-version';\n\n/**\n * User agent test for IOS. Determines whether current version is < 8. Version 8\n * and higher allow javascript execution while scrolling.\n * @param {string} userAgent The user agent string.\n * @return {boolean}\n */\nexport default function hasScrollEvents(userAgent) {\n  if (isIOS(userAgent)) {\n    return getIOSVersion(userAgent) >= 800;\n  }\n  return !isNativeAndroid(userAgent);\n}\n","/**\n * Hyphenates a javascript style string to a css one. For example:\n * MozBoxSizing -> -moz-box-sizing.\n * @param {string|false} str The string to hyphenate.\n * @return {string} The hyphenated string.\n */\nexport default function hyphenate(str) {\n  // Catch booleans.\n  if (!str) {\n    return '';\n  }\n\n  // Turn MozBoxSizing into -moz-box-sizing.\n  return str\n    .replace(/([A-Z])/g, (str, m1) => '-' + m1.toLowerCase())\n    .replace(/^ms-/, '-ms-');\n}\n","/**\n * Check for Microsoft Internet Explorer string.\n * @param {string} userAgent The user agent string.\n * @return {boolean}\n */\nexport default function isIE(userAgent) {\n  return userAgent.includes('Trident/');\n}\n","import OdoDevice from '@odopod/odo-device';\nimport events from './events';\nimport {\n  getElement,\n  getFakeEvent,\n  isOwnEvent,\n} from './_animation-utils';\n\n/**\n * Execute a callback when a css animation finishes.\n * @param {Element} elem The element which as an animation on it.\n * @param {Function} fn Callback function\n * @param {Object} [context=window] Optional context for the callback.\n */\nexport default function onAnimationEnd(elem, fn, context = window) {\n  const element = getElement(elem);\n\n  const callback = fn.bind(context);\n\n  function animationEnded(evt) {\n    // Ensure the `animationend` event was from the element specified.\n    // Difficult to test without tracking callbacks.\n    /* istanbul ignore next */\n    if (!isOwnEvent(evt)) {\n      return;\n    }\n\n    // Remove the listener if it was bound.\n    if (OdoDevice.HAS_CSS_ANIMATIONS) {\n      evt.currentTarget.removeEventListener(events.ANIMATIONEND, animationEnded);\n    }\n\n    callback(evt);\n  }\n\n  if (OdoDevice.HAS_CSS_ANIMATIONS) {\n    element.addEventListener(events.ANIMATIONEND, animationEnded);\n  } else {\n    // Callback is expected to be async, so push it to the end of the queue.\n    setTimeout(() => {\n      animationEnded(getFakeEvent(element));\n    }, 0);\n  }\n}\n","/**\n * Remove an item from an array.\n * @param {Array.<*>} arr An array.\n * @param {*} item Thing to remove from the array.\n * @return {?*} The item which was removed or null.\n */\nexport default function pull(arr, item) {\n  const index = arr.indexOf(item);\n  if (index === -1) {\n    return null;\n  }\n\n  arr.splice(index, 1);\n  return item;\n}\n","/**\n * Creates a random string for IDs, etc.\n * http://stackoverflow.com/a/8084248/995529\n * @return {string} Random string.\n */\nexport default function random() {\n  return Math.random().toString(36).substring(7);\n}\n","/**\n * Removes all children from a parent node.\n * @param {Element} element Parent node.\n */\nexport default function removeChildren(element) {\n  element.textContent = '';\n}\n","import normalizeHash from './_normalize-hash';\nimport setHash from './set-hash';\n\n/**\n * Updates the user's history with new hash\n * @param {string} newHash New hash, without `#`\n */\nexport default function replaceWithHash(newHash) {\n  let hash = normalizeHash(newHash);\n  if (window.history.replaceState) {\n    hash = normalizeHash(hash);\n\n    // If resetting the hash, the whole path is needed. `''` doesn't work.\n    if (hash) {\n      hash = '#' + hash;\n    } else {\n      hash = window.location.pathname + window.location.search;\n    }\n\n    window.history.replaceState({}, null, hash);\n  } else {\n    setHash(hash);\n  }\n}\n","/**\n * Swaps element1 with element2 in the DOM.\n * @param {Element} elm1 first element.\n * @param {Element} elm2 second element.\n */\nexport default function swapElements(elm1, elm2) {\n  if (!elm1 || !elm2) {\n    return;\n  }\n\n  const parent1 = elm1.parentNode;\n  const next1 = elm1.nextSibling;\n  const parent2 = elm2.parentNode;\n  const next2 = elm2.nextSibling;\n\n  parent1.insertBefore(elm2, next1);\n  parent2.insertBefore(elm1, next2);\n}\n","/**\n * Calculates the offset index for a circular list.\n * @param {number} index Starting index.\n * @param {number} displacement Offset from the starting index. Can be negative\n *     or positive. For example, -2 or 2.\n * @param {number} length Length of the list.\n * @return {number} The index of the relative displacement, wrapping around\n *     the end of the list to the start when the displacement is larger than\n *     what's left in the list.\n */\nexport default function wrapAroundList(index, displacement, length) {\n  return (index + displacement + length * 10) % length;\n}\n"],"names":["isDefined","value","undefined","transitions","transitionId","saveTransition","element","timerId","listener","clearTransition","getElement","elem","jquery","length","TypeError","isOwnEvent","event","target","currentTarget","getFakeEvent","noop","Stepper","options","Object","assign","Defaults","_animationAmount","this","end","start","_animationStart","Date","_handler","_animateLoop","bind","onfinish","_requestId","requestAnimationFrame","now","getTime","percent","duration","step","call","context","dispose","easing","cancel","window","k","Math","cos","PI","Box","top","right","bottom","left","getPointerEvent","OdoDevice","HAS_POINTER_EVENTS","div","events","document","createElement","style","transitionProperty","Dom","TRANSITION","ANIMATION","closest","arr","num","reduce","closestDiff","diff","abs","Infinity","Coordinate","x","y","clone","scale","sx","optSy","translate","tx","ty","equals","a","b","distance","dx","dy","sqrt","difference","sum","product","quotient","defaultsTo","obj","defaultValue","Promise","resolve","readyState","addEventListener","complete","removeEventListener","ready","setAllHeights","elements","height","i","onTransitionEnd","fn","property","timeout","callback","transitionEnded","evt","prop","fake","propertyName","HAS_TRANSITIONS","TRANSITIONEND","setTimeout","fadeElement","isOut","invisible","hasIn","classList","contains","Classes","IN","hasFade","FADE","fakeEvent","remove","INVISIBLE","add","toggle","getSize","offsetWidth","offsetHeight","getFloat","parseFloat","getBox","props","getComputedStyle","getMarginBox","getIOSVersion","userAgent","iosVersion","match","split","parseInt","str","number","getNumberOption","Number","isNaN","isString","getStringOption","isAndroidOS","includes","isEdge","isChrome","isNativeAndroid","isIOS","test","Rect","w","h","width","intersects","normalizeHash","hash","Error","replace","setHash","newHash","st","pageYOffset","location","scrollTo","position","scrollTop","anim","Timer","delay","continuous","startTime","isPaused","isTicking","isContinuous","remaining","resume","pause","stop","_this","restart","reset","clear","id","charAt","toUpperCase","slice","array","size","numArrays","ceil","chunked","Array","index","min","max","filter","groups","list","from","isGroup","nodeType","forEach","tallests","map","tallest","getTallest","tempStyleSheet","body","appendChild","removeChild","dimension","memo","el","outerSize","margins","node","n","optIsForward","isForward","siblingCount","sibling","nextElementSibling","previousElementSibling","indexOf","parentNode","depth","child","m1","toLowerCase","animationEnded","HAS_CSS_ANIMATIONS","ANIMATIONEND","item","splice","random","toString","substring","textContent","history","replaceState","pathname","search","elm1","elm2","parent1","next1","nextSibling","parent2","next2","insertBefore","displacement"],"mappings":"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"}