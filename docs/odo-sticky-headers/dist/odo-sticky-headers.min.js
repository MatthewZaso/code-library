!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@odopod/odo-window-events"),require("@odopod/odo-scroll-animation")):"function"==typeof define&&define.amd?define(["@odopod/odo-window-events","@odopod/odo-scroll-animation"],e):t.OdoStickyHeaders=e(t.OdoWindowEvents,t.OdoScrollAnimation)}(this,function(t,e){"use strict";function s(t,e){Object.keys(e).forEach(function(s){t.style[s]=e[s]})}function i(t){return t&&1===t.nodeType}function o(t,e,s,i){return t>=e-i&&t<=s+i}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),h=function(){function t(e){n(this,t),this.element=e,this.isFixed=!1,this.isAtBottom=!1,this.isPromoted=!1,this._wrapStickyElement(),this.update()}return t.prototype._wrapStickyElement=function(){this.wrapper=document.createElement("div"),this.wrapper.className=t.Classes.WRAPPER,this.element.parentNode.insertBefore(this.wrapper,this.element),s(this.element,{position:t.INITIAL_POSITION,zIndex:1,top:0,left:0,width:"100%",overflow:"hidden"}),this.element.classList.add(t.Classes.IS_AT_TOP),this.wrapper.appendChild(this.element)},t.prototype._unwrapStickyElement=function(){var t=this.wrapper.parentNode;t.appendChild(this.element),t.removeChild(this.wrapper)},t.prototype.update=function(){var t=this.element.getBoundingClientRect();this.top=t.top+window.pageYOffset,this.height=Math.round(t.height)},t.prototype.stick=function(e,s){this.wrapper.style.height=this.height+"px",this.element.style.position="fixed",this.element.style.top=e+"px",this.element.classList.add(t.Classes.IS_FIXED),this.element.classList.remove(t.Classes.IS_AT_BOTTOM),this.element.classList.remove(t.Classes.IS_AT_TOP),s&&s.appendChild(this.element),this.isAtBottom=!1,this.isFixed=!0},t.prototype.unstick=function(){this.wrapper.style.height="",this.element.style.position=t.INITIAL_POSITION,this.element.style.top="",this.element.classList.add(t.Classes.IS_AT_TOP),this.element.classList.remove(t.Classes.IS_FIXED),this.element.classList.remove(t.Classes.IS_AT_BOTTOM),this.element.parentNode!==this.wrapper&&this.wrapper.appendChild(this.element),this.isFixed=!1,this.isAtBottom=!1},t.prototype.stickToBottom=function(e){this.element.style.position="absolute",this.element.style.top=e+"px",this.element.classList.add(t.Classes.IS_AT_BOTTOM),this.element.classList.remove(t.Classes.IS_FIXED),this.element.classList.remove(t.Classes.IS_AT_TOP),document.body.appendChild(this.element),this.isFixed=!1,this.isAtBottom=!0},t.prototype.layerPromote=function(){this.element.style.willChange="position",this.element.style.transform="translateZ(0)",this.isPromoted=!0},t.prototype.layerDemote=function(){this.element.style.willChange="",this.element.style.transform="",this.isPromoted=!1},t.prototype.dispose=function(){this.unstick(),this._unwrapStickyElement(),s(this.element,{position:"",zIndex:"",top:"",left:"",width:"",overflow:"",willChange:"",transform:""}),this.element=null,this.wrapper=null},t}();h.INITIAL_POSITION="relative",h.Classes={BASE:"odo-sticky-headers__item",WRAPPER:"odo-sticky-headers__item-wrapper",IS_FIXED:"is-fixed",IS_AT_TOP:"is-at-top",IS_AT_BOTTOM:"is-at-bottom"};var l=function(){function s(){n(this,s),this.items=new Map,this._orderedItems=[],this._scrollId=null,this._resizeId=null,this._overlap=0,this._startingOffset=0,this._holder=null,this._customOverlap=null,this._customOffset=null,this._mode=s.Mode.PUSH}return s.prototype.add=function(s){var o=this;return(Array.isArray(s)?s:[s]).forEach(function(t){if(!i(t))throw new TypeError('StickyHeaders requires an element. Got: "'+t+'"');o.items.has(t)||o.items.set(t,new h(t))}),this._scrollId?this._cacheItemValues():(this._resizeId=t.onResize(this.update.bind(this)),this._scrollId=e.add(this.process.bind(this)),this._cacheStyles()),this.process(),s},s.prototype.remove=function(s){this.items.has(s)&&(this.items.get(s).dispose(),this.items.delete(s),0===this.items.size&&(e.remove(this._scrollId),t.remove(this._resizeId),this._scrollId=null,this._resizeId=null))},s.prototype.process=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.pageYOffset;this.mode===s.Mode.STACK?this._processStack(t):this._processPush(t)},s.prototype._processStack=function(t){var e=this;this._orderedItems.forEach(function(s){var i=e._getStackHeight(),o=t+e._overlap+i;!s.isFixed&&o>=s.top?s.stick(e._startingOffset+i,e._holder):s.isFixed&&o<s.top+s.height&&s.unstick()})},s.prototype._processPush=function(t){var e=this,s=t+this._overlap;this._orderedItems.forEach(function(t){!t.isFixed&&s>=t.top&&s<t.bottom?t.stick(e._startingOffset,e._holder):!t.isAtBottom&&s>=t.bottom?t.stickToBottom(t.bottom):t.isFixed&&s<t.top&&t.unstick(),e._itemPositionCouldChange(t,s)})},s.prototype._sortItemsByOffset=function(){return Array.from(this.items.values()).sort(function(t,e){return t.top>e.top})},s.prototype._getStackHeight=function(){return this._orderedItems.reduce(function(t,e){return e.isFixed?t+e.height:t},0)},s.prototype._itemPositionCouldChange=function(t,e){var i=o(e,t.top,t.bottom,s.PROMOTION_RANGE);!t.isPromoted&&i?t.layerPromote():t.isPromoted&&!i&&t.layerDemote()},s.prototype._cacheStyles=function(){this._overlap=this.uiOverlap,this._startingOffset=this.uiOffset,this._cacheItemValues()},s.prototype._cacheItemValues=function(){this._orderedItems=this._sortItemsByOffset(),this.mode===s.Mode.PUSH&&this._saveBottomPositionForItems()},s.prototype._saveBottomPositionForItems=function(){this._orderedItems.forEach(function(t,e,i){var o=i[e+1];t.bottom=o&&o.top-t.height||s.LAST_ITEM_BOTTOM})},s.prototype.update=function(){this.items.forEach(function(t){t.unstick()}),this.items.forEach(function(t){t.update()}),this._cacheStyles(),this.process()},s.prototype.dispose=function(){var t=this;this.items.forEach(function(e,s){t.remove(s)}),this._orderedItems.length=0},r(s,[{key:"uiOverlap",get:function(){return this._customOverlap?this._customOverlap():0},set:function(t){this._customOverlap=t,this.update()}},{key:"uiOffset",get:function(){return this._customOffset?this._customOffset():this.uiOverlap},set:function(t){this._customOffset=t}},{key:"stickyHolder",get:function(){return this._holder},set:function(t){this._holder=i(t)?t:null}},{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t}}]),s}();return l.PROMOTION_RANGE=200,l.LAST_ITEM_BOTTOM=1/0,l.Mode={PUSH:1,STACK:2},l.StickyItem=h,l});
//# sourceMappingURL=odo-sticky-headers.min.js.map
