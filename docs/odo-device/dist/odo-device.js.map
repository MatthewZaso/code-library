{"version":3,"file":"odo-device.js","sources":["../src/device.js"],"sourcesContent":["/**\n * Object Model prefixes.\n * @type {Array.<string>}\n * @private\n */\nconst prefixes = [\n  'Webkit',\n  'Moz',\n  'O',\n  'ms',\n];\n\n/**\n * Prefix lookup cache.\n * @type {Object}\n * @private\n */\nconst prefixCache = {};\n\nfunction isDefined(thing) {\n  return typeof thing !== 'undefined';\n}\n\nfunction getCacheName(property, value, isValueDefined) {\n  if (isValueDefined) {\n    return property + value;\n  }\n\n  return property;\n}\n\nconst element = document.createElement('div');\n\n/**\n * Returns the prefixed style property if it exists.\n * {@link http://perfectionkills.com/feature-testing-css-properties/}\n *\n * @param {string} property The property name.\n * @param {string} [value] Value to set and test. If undefined, this test will\n *     only check that the property exists, not whether it supports the value.\n * @return {string|false} The style property or false.\n */\nfunction prefixed(property, value) {\n  const shouldTestValue = isDefined(value);\n  const cacheName = getCacheName(property, value, shouldTestValue);\n\n  // Check cache.\n  if (isDefined(prefixCache[cacheName])) {\n    return prefixCache[cacheName];\n  }\n\n  const ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  // Create an array of prefixed properties. ['transform', 'WebkitTransform'].\n  const props = (`${property} ${prefixes.join(ucProp + ' ')}${ucProp}`).split(' ');\n  const { style } = element;\n\n  for (let i = 0; i < props.length; i++) {\n    const prop = props[i];\n    const before = style[prop];\n\n    // Check the existence of the property.\n    if (isDefined(before)) {\n      // Test if the value sticks after setting it.\n      if (shouldTestValue) {\n        style[prop] = value;\n\n        // If the property value has changed, assume the value used is supported.\n        if (style[prop] !== before) {\n          prefixCache[cacheName] = prop;\n          return prop;\n        }\n      } else {\n        prefixCache[cacheName] = prop;\n        return prop;\n      }\n    }\n  }\n\n  prefixCache[cacheName] = false;\n  return false;\n}\n\n/**\n * Hyphenates a javascript style string to a css one. For example:\n * MozBoxSizing -> -moz-box-sizing.\n *\n * @param {string|false} str The string to hyphenate.\n * @return {string} The hyphenated string.\n */\nfunction hyphenate(str) {\n  // Catch booleans.\n  if (!str) {\n    return '';\n  }\n\n  // Turn MozBoxSizing into -moz-box-sizing.\n  return str.replace(/([A-Z])/g, (str, m1) => `-${m1.toLowerCase()}`).replace(/^ms-/, '-ms-');\n}\n\n/**\n * Prefixed style properties.\n * @type {{[key: string]: string|false}}\n */\nconst Dom = {\n  ANIMATION: prefixed('animation'),\n  ANIMATION_DURATION: prefixed('animationDuration'),\n  TRANSFORM: prefixed('transform'),\n  TRANSITION: prefixed('transition'),\n  TRANSITION_PROPERTY: prefixed('transitionProperty'),\n  TRANSITION_DURATION: prefixed('transitionDuration'),\n  TRANSITION_TIMING_FUNCTION: prefixed('transitionTimingFunction'),\n  TRANSITION_DELAY: prefixed('transitionDelay'),\n};\n\n/**\n * Prefixed css properties.\n * @type {{[key: string]: string}}\n */\nconst Css = {\n  ANIMATION: hyphenate(Dom.ANIMATION),\n  ANIMATION_DURATION: hyphenate(Dom.ANIMATION_DURATION),\n  TRANSFORM: hyphenate(Dom.TRANSFORM),\n  TRANSITION: hyphenate(Dom.TRANSITION),\n  TRANSITION_PROPERTY: hyphenate(Dom.TRANSITION_PROPERTY),\n  TRANSITION_DURATION: hyphenate(Dom.TRANSITION_DURATION),\n  TRANSITION_TIMING_FUNCTION: hyphenate(Dom.TRANSITION_TIMING_FUNCTION),\n  TRANSITION_DELAY: hyphenate(Dom.TRANSITION_DELAY),\n};\n\n/**\n * Whether the browser has css transitions.\n * @type {boolean}\n */\nconst HAS_TRANSITIONS = Dom.TRANSITION !== false;\n\n/**\n * Whether the browser has css animations.\n * @type {boolean}\n */\nconst HAS_CSS_ANIMATIONS = Dom.ANIMATION !== false;\n\n/**\n * Whether the browser has css transitions.\n * @type {boolean}\n */\nconst HAS_TRANSFORMS = Dom.TRANSFORM !== false;\n\n/**\n * The browser can use css transitions and transforms.\n * @type {boolean}\n */\nconst CAN_TRANSITION_TRANSFORMS = HAS_TRANSITIONS && HAS_TRANSFORMS;\n\n/* istanbul ignore next */\n/**\n * Whether the browser supports touch events.\n * @type {boolean}\n */\nconst HAS_TOUCH_EVENTS = 'ontouchstart' in window ||\n  !!window.DocumentTouch && document instanceof window.DocumentTouch;\n\n/**\n * Whether the browser supports pointer events.\n * @type {boolean}\n */\nconst HAS_POINTER_EVENTS = !!window.PointerEvent;\n\n/**\n * Whether the browser supports `localStorage`. Safari in private browsing\n * throws an error when calling `setItem`.\n * @type {boolean}\n */\nconst HAS_LOCAL_STORAGE = (() => {\n  try {\n    const testKey = 'test';\n    localStorage.setItem(testKey, '1');\n    localStorage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    /* istanbul ignore next */\n    return false;\n  }\n})();\n\n// Export everything as an object otherwise other components are unable to stub\n// properties because webpack writes them as getters and non-configurable.\nexport default {\n  prefixed,\n  hyphenate,\n  Dom,\n  Css,\n  HAS_TRANSITIONS,\n  HAS_CSS_ANIMATIONS,\n  HAS_TRANSFORMS,\n  CAN_TRANSITION_TRANSFORMS,\n  HAS_TOUCH_EVENTS,\n  HAS_POINTER_EVENTS,\n  HAS_LOCAL_STORAGE,\n};\n"],"names":["prefixes","prefixCache","isDefined","thing","getCacheName","property","value","isValueDefined","element","document","createElement","prefixed","shouldTestValue","cacheName","ucProp","charAt","toUpperCase","slice","props","join","split","style","i","length","prop","before","hyphenate","str","replace","m1","toLowerCase","Dom","Css","ANIMATION","ANIMATION_DURATION","TRANSFORM","TRANSITION","TRANSITION_PROPERTY","TRANSITION_DURATION","TRANSITION_TIMING_FUNCTION","TRANSITION_DELAY","HAS_TRANSITIONS","HAS_CSS_ANIMATIONS","HAS_TRANSFORMS","CAN_TRANSITION_TRANSFORMS","HAS_TOUCH_EVENTS","window","DocumentTouch","HAS_POINTER_EVENTS","PointerEvent","HAS_LOCAL_STORAGE","testKey","setItem","removeItem","error"],"mappings":"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"}