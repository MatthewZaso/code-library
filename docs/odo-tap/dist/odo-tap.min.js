!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@odopod/odo-helpers"),require("@odopod/odo-pointer")):"function"==typeof define&&define.amd?define(["@odopod/odo-helpers","@odopod/odo-pointer"],t):e.OdoTap=t(e.OdoHelpers,e.OdoPointer)}(this,function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=0;var o=function(e){e.preventDefault()},s=function(){function s(e,i,o){n(this,s),this.element=e,this.fn=i,this.preventEventDefault=o,this.pointer=new t(e,{preventEventDefault:o}),this._listen()}return s.prototype._listen=function(){this._onDragStart=this._handlePointerStart.bind(this),this._onDragMove=this._handlePointerMove.bind(this),this._onDragEnd=this._handlePointerEnd.bind(this),this._onKeyUp=this._handleKeyUp.bind(this),this.pointer.on(t.EventType.START,this._onDragStart),this.pointer.on(t.EventType.MOVE,this._onDragMove),this.pointer.on(t.EventType.END,this._onDragEnd),this.element.addEventListener(e.events.KEYUP,this._onKeyUp),this.preventEventDefault&&this.element.addEventListener(e.events.CLICK,o)},s.prototype._isPastThreshold=function(){return e.Coordinate.distance(this.pointer.pageStart,this.pointer.page)>s.MAX_MOVEMENT},s.prototype._handlePointerStart=function(){this.hasDragged=!1},s.prototype._handlePointerMove=function(){this.hasDragged||(this.hasDragged=this._isPastThreshold())},s.prototype._handlePointerEnd=function(e){!e.isCancelEvent&&this.pointer.deltaTime<s.MAX_TIME&&!this.hasDragged&&!0!==this.fn(e)&&e.preventDefault()},s.prototype._handleKeyUp=function(e){13!==e.which&&32!==e.which||(this.fn(e),e.preventDefault())},s.prototype.dispose=function(){this.element.removeEventListener(e.events.CLICK,o),this.element.removeEventListener(e.events.KEYUP,this._onKeyUp),this.pointer.on(t.EventType.START,this._onDragStart),this.pointer.on(t.EventType.MOVE,this._onDragMove),this.pointer.on(t.EventType.END,this._onDragEnd),this.pointer.dispose(),this.element=null,this.fn=null},s.addListener=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="OdoTap"+(i+=1);return s._listeners.set(o,new s(e,t,n)),o},s.remove=function(e){s._listeners.get(e)&&(s._listeners.get(e).dispose(),s._listeners.delete(e))},s}();return s.MAX_MOVEMENT=10,s.MAX_TIME=250,s._listeners=new Map,s});
//# sourceMappingURL=odo-tap.min.js.map
