{"version":3,"file":"odo-device.min.js","sources":["../src/device.js"],"sourcesContent":["/**\n * Object Model prefixes.\n * @type {Array.<string>}\n * @private\n */\nconst prefixes = [\n  'Webkit',\n  'Moz',\n  'O',\n  'ms',\n];\n\n/**\n * Prefix lookup cache.\n * @type {Object}\n * @private\n */\nconst prefixCache = {};\n\nfunction isDefined(thing) {\n  return typeof thing !== 'undefined';\n}\n\nfunction getCacheName(property, value, isValueDefined) {\n  if (isValueDefined) {\n    return property + value;\n  }\n\n  return property;\n}\n\nconst element = document.createElement('div');\n\n/**\n * Returns the prefixed style property if it exists.\n * {@link http://perfectionkills.com/feature-testing-css-properties/}\n *\n * @param {string} propName The property name.\n * @param {string} [value] Value to set and test. If undefined, this test will\n *     only check that the property exists, not whether it supports the value.\n * @return {string|boolean} The style property or false.\n */\nfunction prefixed(property, value) {\n  const shouldTestValue = isDefined(value);\n  const cacheName = getCacheName(property, value, shouldTestValue);\n\n  // Check cache.\n  if (isDefined(prefixCache[cacheName])) {\n    return prefixCache[cacheName];\n  }\n\n  const ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  // Create an array of prefixed properties. ['transform', 'WebkitTransform'].\n  const props = (`${property} ${prefixes.join(ucProp + ' ')}${ucProp}`).split(' ');\n  const { style } = element;\n\n  for (let i = 0; i < props.length; i++) {\n    const prop = props[i];\n    const before = style[prop];\n\n    // Check the existence of the property.\n    if (isDefined(before)) {\n      // Test if the value sticks after setting it.\n      if (shouldTestValue) {\n        style[prop] = value;\n\n        // If the property value has changed, assume the value used is supported.\n        if (style[prop] !== before) {\n          prefixCache[cacheName] = prop;\n          return prop;\n        }\n      } else {\n        prefixCache[cacheName] = prop;\n        return prop;\n      }\n    }\n  }\n\n  prefixCache[cacheName] = false;\n  return false;\n}\n\n/**\n * Hyphenates a javascript style string to a css one. For example:\n * MozBoxSizing -> -moz-box-sizing.\n *\n * @param {string|boolean} str The string to hyphenate.\n * @return {string} The hyphenated string.\n */\nfunction hyphenate(str) {\n  // Catch booleans.\n  if (!str) {\n    return '';\n  }\n\n  // Turn MozBoxSizing into -moz-box-sizing.\n  return str.replace(/([A-Z])/g, (str, m1) => `-${m1.toLowerCase()}`).replace(/^ms-/, '-ms-');\n}\n\n/**\n * Prefixed style properties.\n * @enum {string|boolean}\n */\nconst Dom = {\n  ANIMATION: prefixed('animation'),\n  ANIMATION_DURATION: prefixed('animationDuration'),\n  TRANSFORM: prefixed('transform'),\n  TRANSITION: prefixed('transition'),\n  TRANSITION_PROPERTY: prefixed('transitionProperty'),\n  TRANSITION_DURATION: prefixed('transitionDuration'),\n  TRANSITION_TIMING_FUNCTION: prefixed('transitionTimingFunction'),\n  TRANSITION_DELAY: prefixed('transitionDelay'),\n};\n\n/**\n * Prefixed css properties.\n * @enum {string}\n */\nconst Css = {\n  ANIMATION: hyphenate(Dom.ANIMATION),\n  ANIMATION_DURATION: hyphenate(Dom.ANIMATION_DURATION),\n  TRANSFORM: hyphenate(Dom.TRANSFORM),\n  TRANSITION: hyphenate(Dom.TRANSITION),\n  TRANSITION_PROPERTY: hyphenate(Dom.TRANSITION_PROPERTY),\n  TRANSITION_DURATION: hyphenate(Dom.TRANSITION_DURATION),\n  TRANSITION_TIMING_FUNCTION: hyphenate(Dom.TRANSITION_TIMING_FUNCTION),\n  TRANSITION_DELAY: hyphenate(Dom.TRANSITION_DELAY),\n};\n\n/**\n * Whether the browser has css transitions.\n * @type {boolean}\n */\nconst HAS_TRANSITIONS = Dom.TRANSITION !== false;\n\n/**\n * Whether the browser has css animations.\n * @type {boolean}\n */\nconst HAS_CSS_ANIMATIONS = Dom.ANIMATION !== false;\n\n/**\n * Whether the browser has css transitions.\n * @type {boolean}\n */\nconst HAS_TRANSFORMS = Dom.TRANSFORM !== false;\n\n/**\n * The browser can use css transitions and transforms.\n * @type {boolean}\n */\nconst CAN_TRANSITION_TRANSFORMS = HAS_TRANSITIONS && HAS_TRANSFORMS;\n\n/* istanbul ignore next */\n/**\n * Whether the browser supports touch events.\n * @type {boolean}\n */\nconst HAS_TOUCH_EVENTS = 'ontouchstart' in window ||\n  !!window.DocumentTouch && document instanceof window.DocumentTouch;\n\n/**\n * Whether the browser supports pointer events.\n * @type {boolean}\n */\nconst HAS_POINTER_EVENTS = !!window.PointerEvent;\n\n/**\n * Whether the browser supports `localStorage`. Safari in private browsing\n * throws an error when calling `setItem`.\n * @type {boolean}\n */\nconst HAS_LOCAL_STORAGE = (() => {\n  try {\n    const testKey = 'test';\n    localStorage.setItem(testKey, '1');\n    localStorage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    /* istanbul ignore next */\n    return false;\n  }\n})();\n\n// Export everything as an object otherwise other components are unable to stub\n// properties because webpack writes them as getters and non-configurable.\nexport default {\n  prefixed,\n  hyphenate,\n  Dom,\n  Css,\n  HAS_TRANSITIONS,\n  HAS_CSS_ANIMATIONS,\n  HAS_TRANSFORMS,\n  CAN_TRANSITION_TRANSFORMS,\n  HAS_TOUCH_EVENTS,\n  HAS_POINTER_EVENTS,\n  HAS_LOCAL_STORAGE,\n};\n"],"names":["prefixes","prefixCache","isDefined","thing","element","document","createElement","prefixed","property","value","shouldTestValue","cacheName","ucProp","charAt","toUpperCase","slice","props","join","split","style","i","length","prop","before","hyphenate","str","replace","m1","toLowerCase","Dom","Css","ANIMATION","ANIMATION_DURATION","TRANSFORM","TRANSITION","TRANSITION_PROPERTY","TRANSITION_DURATION","TRANSITION_TIMING_FUNCTION","TRANSITION_DELAY","HAS_TRANSITIONS","HAS_TRANSFORMS","window","DocumentTouch","PointerEvent","testKey","setItem","removeItem","error"],"mappings":"qLAKA,IAAMA,GACJ,SACA,MACA,IACA,MAQIC,KAEN,SAASC,EAAUC,eACO,IAAVA,EAWhB,IAAMC,EAAUC,SAASC,cAAc,OAWvC,SAASC,EAASC,EAAUC,OAnBND,EAoBdE,EAAkBR,EAAUO,GAC5BE,GArBcH,EAqBWA,EAAiBE,EAnBvCF,EAmBgCC,EAhBlCD,MAmBHN,EAAUD,EAAYU,WACjBV,EAAYU,WAGfC,EAASJ,EAASK,OAAO,GAAGC,cAAgBN,EAASO,MAAM,GAG3DC,GAAYR,MAAYR,EAASiB,KAAKL,EAAS,KAAOA,GAAUM,MAAM,KACpEC,EAAUf,EAAVe,MAECC,EAAI,EAAGA,EAAIJ,EAAMK,OAAQD,IAAK,KAC/BE,EAAON,EAAMI,GACbG,EAASJ,EAAMG,MAGjBpB,EAAUqB,GAAS,KAEjBb,WASUC,GAAaW,EAClBA,OATDA,GAAQb,EAGVU,EAAMG,KAAUC,WACNZ,GAAaW,EAClBA,YASHX,IAAa,GAClB,EAUT,SAASa,EAAUC,UAEZA,EAKEA,EAAIC,QAAQ,WAAY,SAACD,EAAKE,aAAWA,EAAGC,gBAAiBF,QAAQ,OAAQ,QAJ3E,GAWX,IAAMG,aACOtB,EAAS,gCACAA,EAAS,+BAClBA,EAAS,wBACRA,EAAS,kCACAA,EAAS,0CACTA,EAAS,iDACFA,EAAS,6CACnBA,EAAS,oBAOvBuB,aACON,EAAUK,EAAIE,8BACLP,EAAUK,EAAIG,8BACvBR,EAAUK,EAAII,sBACbT,EAAUK,EAAIK,gCACLV,EAAUK,EAAIM,yCACdX,EAAUK,EAAIO,gDACPZ,EAAUK,EAAIQ,6CACxBb,EAAUK,EAAIS,mBAO5BC,GAAqC,IAAnBV,EAAIK,WAYtBM,GAAmC,IAAlBX,EAAII,0FANkB,IAAlBJ,EAAIE,qDAYGQ,GAAmBC,mBAO5B,iBAAkBC,UACvCA,OAAOC,eAAiBrC,oBAAoBoC,OAAOC,mCAM1BD,OAAOE,+BAOT,mBAEjBC,EAAU,2BACHC,QAAQD,EAAS,kBACjBE,WAAWF,IACjB,EACP,MAAOG,UAEA,GARgB"}