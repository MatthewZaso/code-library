{"version":3,"file":"odo-device.js","sources":["../src/device.js"],"sourcesContent":["/**\n * Object Model prefixes.\n * @type {Array.<string>}\n * @private\n */\nconst prefixes = [\n  'Webkit',\n  'Moz',\n  'O',\n  'ms',\n];\n\n/**\n * Prefix lookup cache.\n * @type {Object}\n * @private\n */\nconst prefixCache = {};\n\nfunction isDefined(thing) {\n  return typeof thing !== 'undefined';\n}\n\nfunction getCacheName(property, value, isValueDefined) {\n  if (isValueDefined) {\n    return property + value;\n  }\n\n  return property;\n}\n\nconst element = document.createElement('div');\n\n/**\n * Returns the prefixed style property if it exists.\n * {@link http://perfectionkills.com/feature-testing-css-properties/}\n *\n * @param {string} property The property name.\n * @param {string} [value] Value to set and test. If undefined, this test will\n *     only check that the property exists, not whether it supports the value.\n * @return {string|false} The style property or false.\n */\nfunction prefixed(property, value) {\n  const shouldTestValue = isDefined(value);\n  const cacheName = getCacheName(property, value, shouldTestValue);\n\n  // Check cache.\n  if (isDefined(prefixCache[cacheName])) {\n    return prefixCache[cacheName];\n  }\n\n  const ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  // Create an array of prefixed properties. ['transform', 'WebkitTransform'].\n  const props = (`${property} ${prefixes.join(ucProp + ' ')}${ucProp}`).split(' ');\n  const { style } = element;\n\n  for (let i = 0; i < props.length; i++) {\n    const prop = props[i];\n    const before = style[prop];\n\n    // Check the existence of the property.\n    if (isDefined(before)) {\n      // Test if the value sticks after setting it.\n      if (shouldTestValue) {\n        style[prop] = value;\n\n        // If the property value has changed, assume the value used is supported.\n        if (style[prop] !== before) {\n          prefixCache[cacheName] = prop;\n          return prop;\n        }\n      } else {\n        prefixCache[cacheName] = prop;\n        return prop;\n      }\n    }\n  }\n\n  prefixCache[cacheName] = false;\n  return false;\n}\n\n/**\n * Hyphenates a javascript style string to a css one. For example:\n * MozBoxSizing -> -moz-box-sizing.\n *\n * @param {string|false} str The string to hyphenate.\n * @return {string} The hyphenated string.\n */\nfunction hyphenate(str) {\n  // Catch booleans.\n  if (!str) {\n    return '';\n  }\n\n  // Turn MozBoxSizing into -moz-box-sizing.\n  return str.replace(/([A-Z])/g, (str, m1) => `-${m1.toLowerCase()}`).replace(/^ms-/, '-ms-');\n}\n\n/**\n * Prefixed style properties.\n * @type {{[key: string]: string|false}}\n */\nconst Dom = {\n  ANIMATION: prefixed('animation'),\n  ANIMATION_DURATION: prefixed('animationDuration'),\n  TRANSFORM: prefixed('transform'),\n  TRANSITION: prefixed('transition'),\n  TRANSITION_PROPERTY: prefixed('transitionProperty'),\n  TRANSITION_DURATION: prefixed('transitionDuration'),\n  TRANSITION_TIMING_FUNCTION: prefixed('transitionTimingFunction'),\n  TRANSITION_DELAY: prefixed('transitionDelay'),\n};\n\n/**\n * Prefixed css properties.\n * @type {{[key: string]: string}}\n */\nconst Css = {\n  ANIMATION: hyphenate(Dom.ANIMATION),\n  ANIMATION_DURATION: hyphenate(Dom.ANIMATION_DURATION),\n  TRANSFORM: hyphenate(Dom.TRANSFORM),\n  TRANSITION: hyphenate(Dom.TRANSITION),\n  TRANSITION_PROPERTY: hyphenate(Dom.TRANSITION_PROPERTY),\n  TRANSITION_DURATION: hyphenate(Dom.TRANSITION_DURATION),\n  TRANSITION_TIMING_FUNCTION: hyphenate(Dom.TRANSITION_TIMING_FUNCTION),\n  TRANSITION_DELAY: hyphenate(Dom.TRANSITION_DELAY),\n};\n\n/**\n * Whether the browser has css transitions.\n * @type {boolean}\n */\nconst HAS_TRANSITIONS = Dom.TRANSITION !== false;\n\n/**\n * Whether the browser has css animations.\n * @type {boolean}\n */\nconst HAS_CSS_ANIMATIONS = Dom.ANIMATION !== false;\n\n/**\n * Whether the browser has css transitions.\n * @type {boolean}\n */\nconst HAS_TRANSFORMS = Dom.TRANSFORM !== false;\n\n/**\n * The browser can use css transitions and transforms.\n * @type {boolean}\n */\nconst CAN_TRANSITION_TRANSFORMS = HAS_TRANSITIONS && HAS_TRANSFORMS;\n\n/* istanbul ignore next */\n/**\n * Whether the browser supports touch events.\n * @type {boolean}\n */\nconst HAS_TOUCH_EVENTS = 'ontouchstart' in window ||\n  !!window.DocumentTouch && document instanceof window.DocumentTouch;\n\n/**\n * Whether the browser supports pointer events.\n * @type {boolean}\n */\nconst HAS_POINTER_EVENTS = !!window.PointerEvent;\n\n/**\n * Whether the browser supports `localStorage`. Safari in private browsing\n * throws an error when calling `setItem`.\n * @type {boolean}\n */\nconst HAS_LOCAL_STORAGE = (() => {\n  try {\n    const testKey = 'test';\n    localStorage.setItem(testKey, '1');\n    localStorage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    /* istanbul ignore next */\n    return false;\n  }\n})();\n\n/**\n * Whether the browser supports the `passive` property in `EventListenerOptions`.\n * @type {boolean}\n */\nconst HAS_PASSIVE_LISTENERS = (() => {\n  let supportsPassiveOption = false;\n  try {\n    const options = {\n      get passive/* istanbul ignore next */() { // eslint-disable-line getter-return\n        supportsPassiveOption = true;\n      },\n    };\n\n    window.addEventListener('test', null, options);\n    return supportsPassiveOption;\n  } catch (e) {\n    /* istanbul ignore next */\n    return false;\n  }\n})();\n\n// Export everything as an object otherwise other components are unable to stub\n// properties because webpack writes them as getters and non-configurable.\nexport default {\n  prefixed,\n  hyphenate,\n  Dom,\n  Css,\n  HAS_TRANSITIONS,\n  HAS_CSS_ANIMATIONS,\n  HAS_TRANSFORMS,\n  CAN_TRANSITION_TRANSFORMS,\n  HAS_TOUCH_EVENTS,\n  HAS_POINTER_EVENTS,\n  HAS_LOCAL_STORAGE,\n  HAS_PASSIVE_LISTENERS,\n};\n"],"names":["prefixes","prefixCache","isDefined","thing","getCacheName","property","value","isValueDefined","element","document","createElement","prefixed","shouldTestValue","cacheName","ucProp","charAt","toUpperCase","slice","props","join","split","style","i","length","prop","before","hyphenate","str","replace","m1","toLowerCase","Dom","ANIMATION","ANIMATION_DURATION","TRANSFORM","TRANSITION","TRANSITION_PROPERTY","TRANSITION_DURATION","TRANSITION_TIMING_FUNCTION","TRANSITION_DELAY","Css","HAS_TRANSITIONS","HAS_CSS_ANIMATIONS","HAS_TRANSFORMS","CAN_TRANSITION_TRANSFORMS","HAS_TOUCH_EVENTS","window","DocumentTouch","HAS_POINTER_EVENTS","PointerEvent","HAS_LOCAL_STORAGE","testKey","localStorage","setItem","removeItem","error","HAS_PASSIVE_LISTENERS","supportsPassiveOption","options","passive","addEventListener","e"],"mappings":"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"}