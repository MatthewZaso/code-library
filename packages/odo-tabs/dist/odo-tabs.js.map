{"version":3,"file":"odo-tabs.js","sources":["../src/tabs-event.js","../src/tabs.js"],"sourcesContent":["class TabsEvent {\n  /**\n   * Object representing a tab event.\n   * @param {string} type Event type.\n   * @param {number} index Index of tab.\n   * @constructor\n   */\n  constructor(type, index) {\n    this.type = type;\n\n    /** @type {number} */\n    this.index = index;\n\n    /** @type {boolean} Whether `preventDefault` has been called. */\n    this.defaultPrevented = false;\n  }\n\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n}\n\nexport default TabsEvent;\n","/**\n * @fileoverview Easy tabs. Inspired by bootstrap and jQuery UI.\n *\n * {@link http://jqueryui.com/tabs/}\n * {@link https://github.com/jquery/jquery-ui/blob/master/ui/tabs.js}\n * {@link http://www.marcozehe.de/2013/02/02/advanced-aria-tip-1-tabs-in-web-apps/}\n * {@link http://git.aaronlumsden.com/tabulous.js/}\n *\n * @author Glen Cheney <glen@odopod.com>\n */\n\nimport TinyEmitter from 'tiny-emitter';\nimport { giveId, clamp, setHash } from '@odopod/odo-helpers';\nimport OdoWindowEvents from '@odopod/odo-window-events';\nimport TabsEvent from './tabs-event';\n\nlet id = 0;\nfunction uniqueId() {\n  id += 1;\n  return `odo-tabs${id}`;\n}\n\nclass Tabs extends TinyEmitter {\n  /**\n   * A tabs component.\n   * @param {Element} element The tabs list element.\n   * @constructor\n   */\n  constructor(element) {\n    super();\n\n    /** @type {Element} */\n    this.element = element;\n\n    /** @private {number} */\n    this._selectedIndex = -1;\n\n    /**\n     * List items, children of the tabs list.\n     * @type {Array.<Element>}\n     */\n    this.tabs = Array.from(this.element.children);\n\n    /**\n     * Anchor elements inside the tab.\n     * @type {Array.<HTMLAnchorElement>}\n     */\n    this.anchors = this.tabs.map(tab => tab.querySelector('a'));\n\n    /**\n     * Tab pane elements.\n     * @type {Array.<Element>}\n     */\n    this.panes = this.anchors.map(anchor => document.getElementById(anchor.getAttribute('href').substring(1)));\n\n    /**\n     * Wrapper for the panes.\n     * @type {Element}\n     */\n    this.panesContainer = this.panes[0].parentNode;\n\n    /**\n     * Get an array of [possible] hashes.\n     * @type {Array.<?string>}\n     */\n    this.hashes = this.anchors.map(anchor => anchor.getAttribute('data-hash'));\n\n    this.init();\n  }\n\n  init() {\n    const startIndex = this.getStartingIndex();\n\n    // Bind events.\n    this._setupHandlers();\n\n    // Add aria roles.\n    this._processTabs();\n\n    // Show the first or the one in the #hash.\n    this.setSelectedIndex(startIndex, true);\n  }\n\n  /**\n   * Determine the starting tab index. It will first look at the URL's #hash, then\n   * for a pane which has the IS_SELECTED class, defaulting to the first tab if\n   * neither of those exist.\n   * @return {number}\n   */\n  getStartingIndex() {\n    const hashIndex = this._getWindowHashIndex();\n\n    if (hashIndex > -1) {\n      return hashIndex;\n    }\n\n    const startIndex = this.panes.findIndex(pane => pane.matches('.' + Tabs.ClassName.IS_SELECTED));\n\n    if (startIndex > -1) {\n      return startIndex;\n    }\n\n    return 0;\n  }\n\n  /**\n   * Set tabIndex attribute, add any aria roles and classes.\n   * @protected\n   */\n  _processTabs() {\n    this.element.classList.add(Tabs.ClassName.TABS);\n    this.element.setAttribute('role', 'tablist');\n\n    // Tab wrappers.\n    this.tabs.forEach((tab) => {\n      tab.setAttribute('role', 'presentation');\n    });\n\n    // Tab (anchor) elements.\n    this.anchors.forEach((anchor, i) => {\n      anchor.setAttribute('role', 'tab');\n      anchor.setAttribute('tabIndex', -1);\n      anchor.setAttribute('aria-selected', false);\n\n      giveId(anchor, uniqueId);\n\n      const pane = this.panes[i];\n      anchor.setAttribute('aria-controls', pane.id);\n      pane.setAttribute('aria-labelledby', anchor.id);\n    });\n\n    // Panes.\n    this.panes.forEach((pane) => {\n      pane.setAttribute('role', 'tabpanel');\n      pane.setAttribute('aria-hidden', true);\n    });\n  }\n\n  /**\n   * Bind event listeners.\n   * @protected\n   */\n  _setupHandlers() {\n    this._onClick = this._handleClick.bind(this);\n    this._onKeydown = this._handleKeydown.bind(this);\n    this._onHashChange = this._handleHashChange.bind(this);\n\n    this.element.addEventListener('click', this._onClick);\n    this.element.addEventListener('keydown', this._onKeydown);\n    window.addEventListener('hashchange', this._onHashChange);\n    this._resizeId = OdoWindowEvents.onResize(this.update.bind(this));\n  }\n\n  /**\n   * Delegated click listener. Look for a tab close to the target and select it\n   * if it exists.\n   * @param {MouseEvent} evt Event object.\n   * @private\n   */\n  _handleClick(evt) {\n    evt.preventDefault();\n\n    const tab = evt.target.closest('.' + Tabs.ClassName.TAB);\n    if (tab) {\n      this.setSelectedIndex(this.tabs.indexOf(tab));\n    }\n  }\n\n  /**\n   * Key pressed on the tab list. Change focus or select the tab.\n   * @param {KeyboardEvent} evt Event object.\n   * @private\n   */\n  _handleKeydown(evt) {\n    let focusedIndex = this._getFocusedTabIndex();\n\n    switch (evt.which) {\n      // Right | Down\n      case 39:\n      case 40:\n        focusedIndex += 1;\n        break;\n\n      // Left | Up\n      case 37:\n      case 38:\n        focusedIndex -= 1;\n        break;\n\n      // Spacebar | Enter\n      case 32:\n      case 13:\n        evt.preventDefault();\n        this.setSelectedIndex(focusedIndex);\n        return;\n      default:\n        return;\n    }\n\n    evt.preventDefault();\n    this._focusTab(clamp(focusedIndex, 0, this.tabs.length - 1));\n  }\n\n  /**\n   * URL hash changed, see if the hash matches one of the hashes stored and if it\n   * does, navigate to that pane.\n   * @private\n   */\n  _handleHashChange() {\n    const hashIndex = this._getWindowHashIndex();\n    if (hashIndex > -1) {\n      this.setSelectedIndex(hashIndex);\n    }\n  }\n\n  /**\n   * Reset the height of the pane parent.\n   * @private\n   */\n  update() {\n    const currentPane = this.panes[this.getSelectedIndex()];\n    const newHeight = currentPane.offsetHeight;\n    this.panesContainer.style.height = newHeight + 'px';\n  }\n\n  /**\n   * Retrieve the hash without the `#` from the url.\n   * @return {string}\n   * @private\n   */\n  _getWindowHashIndex() {\n    return this.hashes.indexOf(window.location.hash.substring(1));\n  }\n\n  /**\n   * Find the index of the currently focused tab.\n   * @return {number}\n   * @private\n   */\n  _getFocusedTabIndex() {\n    const focusedTab = document.activeElement.closest('.' + Tabs.ClassName.TAB);\n    return this.tabs.indexOf(focusedTab);\n  }\n\n  /**\n   * Focus on a tab.\n   * @param {number} index Tab index to focus on.\n   * @private\n   */\n  _focusTab(index) {\n    this.anchors[index].focus();\n  }\n\n  /**\n   * Returns the currently selected index.\n   * @return {number}\n   */\n  getSelectedIndex() {\n    return this._selectedIndex;\n  }\n\n  /**\n   * Set the selected index to a new value. Will exit early if the index is out of\n   * range, or the index is the same as the current one.\n   * @param {number} index Index to go to.\n   * @param {boolean} [skipHash] Whether to skip setting the hash.\n   */\n  setSelectedIndex(index, skipHash) {\n    if (index === this._selectedIndex || index < 0 || index >= this.tabs.length) {\n      return;\n    }\n\n    // Trigger the will show event and give listeners a chance to cancel showing\n    // the tab/pane.\n    const willShowEvent = new TabsEvent(Tabs.EventType.WILL_SHOW, index);\n    this.emit(willShowEvent.type, willShowEvent);\n\n    if (willShowEvent.defaultPrevented) {\n      return;\n    }\n\n    this._selectTab(index);\n    this._selectPane(index);\n\n    this._selectedIndex = index;\n\n    if (!skipHash && this.hashes[index]) {\n      setHash(this.hashes[index]);\n    }\n\n    const didShowEvent = new TabsEvent(Tabs.EventType.DID_SHOW, index);\n    this.emit(didShowEvent.type, didShowEvent);\n  }\n\n  /**\n   * Update the selected tab.\n   * @param {number} index Index of the new tab.\n   * @private\n   */\n  _selectTab(index) {\n    const newTab = this.tabs[index];\n    const oldTab = this.tabs[this.getSelectedIndex()];\n    const newAnchor = this.anchors[index];\n    const oldAnchor = this.anchors[this.getSelectedIndex()];\n\n    if (oldTab) {\n      oldTab.classList.remove(Tabs.ClassName.IS_SELECTED);\n      oldAnchor.classList.remove(Tabs.ClassName.IS_SELECTED);\n      oldAnchor.setAttribute('tabIndex', -1);\n      oldAnchor.setAttribute('aria-selected', false);\n    }\n\n    newTab.classList.add(Tabs.ClassName.IS_SELECTED);\n    newAnchor.classList.add(Tabs.ClassName.IS_SELECTED);\n    newAnchor.setAttribute('tabIndex', 0);\n    newAnchor.setAttribute('aria-selected', true);\n  }\n\n  /**\n   * Update the selected pane. Handles aria states.\n   * @param {number} index Index of the new pane.\n   * @private\n   */\n  _selectPane(index) {\n    const newPane = this.panes[index];\n    const oldPane = this.panes[this.getSelectedIndex()];\n    const newHeight = newPane.offsetHeight;\n\n    if (oldPane) {\n      oldPane.classList.remove(Tabs.ClassName.IS_SELECTED);\n      oldPane.setAttribute('aria-hidden', true);\n    }\n\n    newPane.classList.add(Tabs.ClassName.IS_SELECTED);\n    newPane.setAttribute('aria-hidden', false);\n\n    this.panesContainer.style.height = newHeight + 'px';\n  }\n\n  /**\n   * Remove event listeners, classes, attributes, and other things added by this script.\n   */\n  dispose() {\n    this.element.classList.remove(Tabs.ClassName.TABS);\n    this.element.removeAttribute('role');\n\n    for (let i = this.tabs.length - 1; i >= 0; i--) {\n      const tab = this.tabs[i];\n      const anchor = this.anchors[i];\n      const pane = this.panes[i];\n\n      tab.classList.remove(Tabs.ClassName.IS_SELECTED);\n      anchor.classList.remove(Tabs.ClassName.IS_SELECTED);\n      pane.classList.remove(Tabs.ClassName.IS_SELECTED);\n      tab.removeAttribute('role');\n      anchor.removeAttribute('role');\n      anchor.removeAttribute('tabIndex');\n      anchor.removeAttribute('aria-selected');\n      anchor.removeAttribute('aria-controls');\n      pane.removeAttribute('role');\n      pane.removeAttribute('aria-labelledby');\n      pane.removeAttribute('aria-hidden');\n    }\n\n    this.panesContainer.style.height = '';\n\n    this.element.removeEventListener('click', this._onClick);\n    this.element.removeEventListener('keydown', this._onKeydown);\n    window.removeEventListener('hashchange', this._onHashChange);\n    OdoWindowEvents.remove(this._resizeId);\n\n    this.element = null;\n    this.anchors = null;\n    this.panes = null;\n    this.panesContainer = null;\n    this._selectedIndex = -1;\n  }\n}\n\nTabs.ClassName = {\n  TABS: 'odo-tabs',\n  TAB: 'odo-tabs__tab',\n  IS_SELECTED: 'is-selected',\n};\n\nTabs.EventType = {\n  WILL_SHOW: 'odotabs:willshow',\n  DID_SHOW: 'odotabs:didshow',\n};\n\nexport default Tabs;\n"],"names":["TabsEvent","type","index","defaultPrevented","preventDefault","id","uniqueId","Tabs","element","_selectedIndex","tabs","Array","from","children","anchors","map","tab","querySelector","panes","document","getElementById","anchor","getAttribute","substring","panesContainer","parentNode","hashes","init","startIndex","getStartingIndex","_setupHandlers","_processTabs","setSelectedIndex","hashIndex","_getWindowHashIndex","findIndex","pane","matches","ClassName","IS_SELECTED","classList","add","TABS","setAttribute","forEach","i","_onClick","_handleClick","bind","_onKeydown","_handleKeydown","_onHashChange","_handleHashChange","addEventListener","_resizeId","OdoWindowEvents","onResize","update","evt","target","closest","TAB","indexOf","focusedIndex","_getFocusedTabIndex","which","_focusTab","clamp","length","currentPane","getSelectedIndex","newHeight","offsetHeight","style","height","window","location","hash","focusedTab","activeElement","focus","skipHash","willShowEvent","EventType","WILL_SHOW","emit","_selectTab","_selectPane","didShowEvent","DID_SHOW","newTab","oldTab","newAnchor","oldAnchor","remove","newPane","oldPane","dispose","removeAttribute","removeEventListener","TinyEmitter"],"mappings":"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"}