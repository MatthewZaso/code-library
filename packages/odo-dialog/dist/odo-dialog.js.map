{"version":3,"file":"odo-dialog.js","sources":["../src/scroll-fix.js","../src/dialog.js"],"sourcesContent":["/**\n * @fileoverview Makes an overflowing element scrollable and handles preventing\n * default events and stopping event propagation when the scrollable element is\n * at the top or bottom of the scrollable area.\n *\n * @author Glen Cheney\n */\n\nimport { string } from '@odopod/odo-helpers';\nimport OdoDevice from '@odopod/odo-device';\n\nconst body = document.body;\n\n/**\n * Makes the element scrollable with some smart listeners because iOS\n * behaves unsatisfactory.\n * @param {Element} element Element to use.\n * @param {string} id Unique id.\n * @constructor\n */\nclass ScrollFix {\n  constructor(element, id) {\n    this.element = element;\n    this.id = id;\n    this.startY = null;\n    this.scrollY = null;\n    this._createBoundEvents();\n    this._registerEvents();\n  }\n\n  _createBoundEvents() {\n    this._touchStartBound = this._onTouchStart.bind(this);\n    this._touchMoveBound = this._onTouchMove.bind(this);\n    this._preventDefaultBound = this._preventDefault.bind(this);\n  }\n\n  /**\n   * Add event listeners.\n   * @private\n   */\n  _registerEvents() {\n    body.addEventListener('touchstart', this._touchStartBound);\n    body.addEventListener('touchmove', this._touchMoveBound);\n    document.addEventListener('touchmove', this._preventDefaultBound);\n  }\n\n  /**\n   * Save positions when the touch starts.\n   * @param {TouchEvent} evt Event object.\n   * @private\n   */\n  _onTouchStart(evt) {\n    this.startY = evt.changedTouches[0].pageY;\n    this.scrollY = this.element.scrollTop;\n  }\n\n  /**\n   * When the touch move and touch start events get to the scrollable element,\n   * prevent them from bubbling further.\n   * @param {TouchEvent} evt Event object.\n   * @private\n   */\n  _onTouchMove(evt) {\n    const deltaY = this.startY - evt.changedTouches[0].pageY;\n    const scrollTop = this.scrollY + deltaY;\n\n    // Prevent default stops all further touches...\n    // the user must lift their finger and swipe again before drags in the\n    // opposite direction register.\n    // However, without this, the same thing occurs, but instead of no\n    // scrolling, the page behind the dialog scrolls.\n    if (scrollTop < 0 || scrollTop + this.element.offsetHeight >\n        this.element.scrollHeight) {\n      evt.preventDefault();\n    } else {\n      evt.stopPropagation();\n    }\n  }\n\n  /**\n   * Simply prevent the event's default action.\n   * @param {TouchEvent} evt Event object.\n   * @private\n   */\n  _preventDefault(evt) {\n    evt.preventDefault();\n  }\n\n  /**\n   * Dispose of this instance by removing handlers and DOM references.\n   */\n  dispose() {\n    body.removeEventListener('touchstart', this._touchStartBound);\n    body.removeEventListener('touchmove', this._touchMoveBound);\n    document.removeEventListener('touchmove', this._preventDefaultBound);\n\n    this.element = null;\n    this.id = null;\n  }\n}\n\nexport default {\n  /**\n   * Dictionary of ScrollFix instances.\n   * @type {Object.<string, ScrollFix>}\n   * @private\n   */\n  _fixes: new Map(),\n\n  /**\n   * Enable an element to be scrollable.\n   * @param {Element} element Element to make scrollable.\n   * @return {string} Id which is used to remove it.\n   */\n  add(element) {\n    if (OdoDevice.HAS_TOUCH_EVENTS) {\n      const id = string.random();\n      this._fixes.set(id, new ScrollFix(element, id));\n      return id;\n    }\n\n    return '';\n  },\n\n  /**\n   * Disable scrolling on an element and remove event listeners. Be aware\n   * that this removes the scroll fix class. If your element doesn't have\n   * the overflow-scrolling: touch property on it, iOS may flicker the whole\n   * container when calling this method.\n   * @param {string} id Id returned from enable.\n   */\n  remove(id) {\n    if (this._fixes.has(id)) {\n      this._fixes.get(id).dispose();\n      this._fixes.delete(id);\n    }\n  },\n};\n","/**\n * @fileoverview UI Component for universal dialogs.\n * Notes\n * * The transition is on the main `element` so that `scale()` transforms do not\n * cause the calculation of `scrollHeight` to be artificially increased.\n * * The backdrop is a sibling to the dialog so that it does not cover the\n * scrollbar of the dialog and so that it doesn't jitter in iOS.\n *\n * @author Glen Cheney <glen@odopod.com>\n */\n\nimport TinyEmitter from 'tiny-emitter';\nimport { animation, array } from '@odopod/odo-helpers';\nimport ScrollFix from './scroll-fix';\n\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]',\n  'area[href]',\n  'input:not([disabled])',\n  'select:not([disabled])',\n  'textarea:not([disabled])',\n  'button:not([disabled])',\n  'iframe',\n  'object',\n  'embed',\n  '[contenteditable]',\n  '[tabindex]:not([tabindex^=\"-\"])',\n].join(',');\n\n/**\n * Dialog that can contain static images, carousels, or videos\n * @param {Element} element Main element.\n *\n * @constructor\n */\nclass Dialog extends TinyEmitter {\n  constructor(element, opts) {\n    super();\n\n    if (!(element instanceof Element)) {\n      throw new TypeError(`OdoDialog requires an element. Got: \"${element}\"`);\n    }\n\n    /**\n     * Base Element.\n     * @type {Element}\n     */\n    this.element = element;\n\n    this.options = Object.assign({}, Dialog.Defaults, opts);\n\n    /**\n     * Dialog Id.\n     * @type {string}\n     */\n    this.id = element.getAttribute('id');\n\n    /**\n     * Dialog backdrop\n     * @type {Element}\n     * @protected\n     */\n    this.backdrop = document.createElement('div');\n    this.backdrop.className = Dialog.Classes.BACKDROP;\n\n    /**\n     * Dialog content (role=document).\n     * @type {Element}\n     * @protected\n     */\n    this.content = this.getByClass(Dialog.Classes.CONTENT);\n\n    /**\n     * Elements which, when clicked, close the dialog.\n     * @type {Element}\n     * @private\n     */\n    this._closers = Array.from(this.element.querySelectorAll('[data-odo-dialog-close]'));\n\n    /**\n     * Window resize Id\n     * @type {string}\n     * @private\n     */\n    this._resizeId = null;\n\n    /**\n     * ScrollFix id\n     * @type {?string}\n     * @private\n     */\n    this._scrollFixId = null;\n\n    /**\n     * Whether the dialog is open.\n     * @type {boolean}\n     */\n    this.isOpen = false;\n\n    /**\n     * Is the dialog currently animating.\n     * @type {boolean}\n     * @protected\n     */\n    this.isAnimating = false;\n\n    /**\n     * Whether the body has a scrollbar.\n     * @type {?boolean}\n     * @private\n     */\n    this._hasBodyScrollbar = null;\n\n    /**\n     * Padding on the body.\n     * @type {number}\n     * @private\n     */\n    this._originalBodyPadding = -1;\n\n    /**\n     * Whether this is a fullscreen dialog. Fullscreen dialogs should not have\n     * paddingRight applied to them.\n     * @type {?boolean}\n     * @private\n     */\n    this._isFullscreen = null;\n\n    Dialog.Instances.push(this);\n\n    if (Dialog.Instances.length === 1) {\n      document.body.addEventListener('click', Dialog._handleTriggerClick);\n    }\n\n    // If this browser does not support auto margins for flexbox, add a class\n    // so that it can be centered differently.\n    this.element.classList.toggle(Dialog.Classes.NO_AUTO_MARGIN, !Dialog.SUPPORTS_AUTO_MARGINS);\n\n    this._bindContexts();\n    this._addA11yAttributes();\n    this._ensureBodyChild();\n  }\n\n  /**\n   * Find descendent element by class.\n   * @param {string} name Name of the class to find.\n   * @return {?Element} The element or undefined.\n   */\n  getByClass(name) {\n    return this.element.getElementsByClassName(name)[0];\n  }\n\n  /**\n   * Bind `this` context to event handlers.\n   */\n  _bindContexts() {\n    this.onKeyPress = this.onKeyPress.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.close = this.close.bind(this);\n  }\n\n  /**\n   * Add static accessibility attributes so that the implementor can leave them\n   * off or in case they forget.\n   */\n  _addA11yAttributes() {\n    this.element.tabIndex = -1;\n    this.element.setAttribute('aria-hidden', true);\n    this.element.setAttribute('role', 'dialog');\n    this.content.setAttribute('role', 'document');\n  }\n\n  /**\n   * If the dialog element is not a direct descendent of the <body>, make it so.\n   */\n  _ensureBodyChild() {\n    if (this.element.parentNode !== document.body) {\n      document.body.appendChild(this.element);\n    }\n  }\n\n  /**\n   * Determine the correct element to scroll fix and fix it.\n   */\n  _applyScrollFix() {\n    // Allow the scrollable element to be something inside the dialog.\n    if (this.options.scrollableElement) {\n      const element = this.element.matches(this.options.scrollableElement) ?\n        this.element :\n        this.element.querySelector(this.options.scrollableElement);\n      this._scrollFixId = ScrollFix.add(element);\n    }\n  }\n\n  /**\n   * If the page already has a scrollbar, adding overflow: hidden will remove it,\n   * shifting the content to the right. To avoid this, there needs to be padding\n   * on the body that's the same width as the scrollbar, but only when the dialog\n   * will not have a scrollbar to take the page scrollbar's place.\n   * @return {number}\n   */\n  _getScrollbarOffset() {\n    const hasDialogScrollbar = this.element.scrollHeight > document.documentElement.clientHeight;\n    return this._hasBodyScrollbar && !hasDialogScrollbar ? Dialog.SCROLLBAR_WIDTH : 0;\n  }\n\n  /**\n   * Click handler on the main element. When the dialog is dismissable and the\n   * user clicked outside the content (i.e. the backdrop), close it.\n   * @param {Event} evt Event object.\n   * @protected\n   */\n  onClick(evt) {\n    if (this.options.dismissable && evt.target === this.element) {\n      this.close();\n    }\n  }\n\n  /**\n   * Keypress event handler\n   * @param {Event} evt Event object\n   * @protected\n   */\n  onKeyPress(evt) {\n    // If 'ESC' is pressed, close the dialog\n    if (this.options.dismissable && evt.which === Dialog.Keys.ESC) {\n      this.close();\n    }\n\n    // If the TAB key is being pressed, make sure the focus stays trapped within\n    // the dialog element.\n    if (evt.which === Dialog.Keys.TAB) {\n      Dialog._trapTabKey(this.element, evt);\n    }\n  }\n\n  /**\n   * Checks to see if a dialog is already open or animating If not, opens dialog.\n   * @param {boolean} [sync=false] Whether to open with transitions or not.\n   */\n  open(sync = false) {\n    if (this.isAnimating || this.isOpen) {\n      return;\n    }\n\n    Dialog.focusedBeforeDialog = document.activeElement;\n    this._hasBodyScrollbar = document.body.clientWidth < window.innerWidth;\n    this._isFullscreen = this.element.classList.contains(Dialog.Classes.FULLSCREEN);\n\n    // Add aria-hidden to other top-level things.\n    const siblings = Dialog._getSiblings(this.element);\n    const originals = siblings.map(element => element.getAttribute('aria-hidden'));\n    siblings.forEach((element, i) => {\n      if (originals[i]) {\n        element.setAttribute('data-odo-dialog-original', originals[i]);\n      }\n      element.setAttribute('aria-hidden', true);\n    });\n\n    this.isOpen = true;\n    this.element.removeAttribute('aria-hidden');\n    this.element.classList.add(Dialog.Classes.OPEN);\n    this.element.classList.add(Dialog.Classes.ENTER);\n    if (Dialog.SCROLLBAR_WIDTH) {\n      document.body.style.paddingRight = Dialog.SCROLLBAR_WIDTH + 'px';\n    }\n    document.body.classList.add(Dialog.Classes.BODY_OPEN);\n    document.body.insertBefore(this.backdrop, this.element.nextSibling);\n    this.element.scrollTop = 0;\n\n    this._applyScrollFix();\n\n    this.element.focus();\n\n    document.addEventListener('keydown', this.onKeyPress);\n    this.element.addEventListener('click', this.onClick);\n    this._closers.forEach((element) => {\n      element.addEventListener('click', this.close);\n    });\n\n    if (sync === true) {\n      this._openNext();\n      this._opened();\n    } else {\n      Dialog._nextFrame(() => {\n        this._openNext();\n        animation.onTransitionEnd(this.element, this._opened, this, null, 1000);\n      });\n    }\n  }\n\n  /**\n   * Start the transition for opening the dialog.\n   */\n  _openNext() {\n    this.isAnimating = true;\n    // Now that the dialog is no longer display:none, the scrollHeight can be measured.\n    const scrollbarOffset = this._getScrollbarOffset();\n    if (!this._isFullscreen && scrollbarOffset > 0) {\n      this.element.style.paddingRight = scrollbarOffset + 'px';\n    }\n\n    this.element.classList.remove(Dialog.Classes.ENTER);\n    this.element.classList.add(Dialog.Classes.ENTERING);\n  }\n\n  /**\n   * Handle the end of the open transition. Emits OPENED event.\n   */\n  _opened() {\n    this.element.classList.remove(Dialog.Classes.ENTERING);\n    this.element.classList.add(Dialog.Classes.VISIBLE);\n    this.isAnimating = false;\n    this.emit(Dialog.EventType.OPENED);\n  }\n\n  /**\n   * Hides dialog\n   * @param {boolean} [sync=false] Whether to close with transitions or not.\n   */\n  close(sync = false) {\n    if (this.isAnimating || !this.isOpen) {\n      return;\n    }\n\n    // Remove aria-hidden to other top-level things.\n    const siblings = Dialog._getSiblings(this.element);\n    const originals = siblings.map(element => element.getAttribute('data-odo-dialog-original'));\n    siblings.forEach((element, i) => {\n      if (originals[i]) {\n        element.setAttribute('aria-hidden', originals[i]);\n        element.removeAttribute('data-odo-dialog-original');\n      } else {\n        element.removeAttribute('aria-hidden');\n      }\n    });\n\n    this.isOpen = false;\n    this.element.classList.add(Dialog.Classes.LEAVE);\n    this.element.classList.remove(Dialog.Classes.VISIBLE);\n\n    ScrollFix.remove(this._scrollFixId);\n\n    if (Dialog.focusedBeforeDialog) {\n      Dialog.focusedBeforeDialog.focus();\n    }\n\n    document.removeEventListener('keydown', this.onKeyPress);\n    this.element.removeEventListener('click', this.onClick);\n    this._closers.forEach((element) => {\n      element.removeEventListener('click', this.close);\n    });\n\n    if (sync === true) {\n      this._closeNext();\n      this._closed();\n    } else {\n      Dialog._nextFrame(() => {\n        this._closeNext();\n        animation.onTransitionEnd(this.element, this._closed, this, null, 1000);\n      });\n    }\n  }\n\n  /**\n   * Start the transition for closing the dialog.\n   */\n  _closeNext() {\n    this.isAnimating = true;\n    this.element.classList.remove(Dialog.Classes.LEAVE);\n    this.element.classList.add(Dialog.Classes.LEAVING);\n  }\n\n  /**\n   * Handle the end of the close transition. Emits the CLOSED event.\n   */\n  _closed() {\n    this.isAnimating = false;\n    this.element.style.paddingRight = '';\n    this.element.setAttribute('aria-hidden', true);\n    this.element.classList.remove(Dialog.Classes.OPEN);\n    this.element.classList.remove(Dialog.Classes.LEAVING);\n    document.body.style.paddingRight = '';\n    document.body.classList.remove(Dialog.Classes.BODY_OPEN);\n    document.body.removeChild(this.backdrop);\n    this.emit(Dialog.EventType.CLOSED);\n  }\n\n  /**\n   * Disposes of global Dialog variables\n   * @public\n   */\n  dispose() {\n    if (this.isOpen) {\n      this.close(true);\n    }\n\n    this.element = null;\n    this.content = null;\n    this.backdrop = null;\n    this._closers.length = 0;\n\n    array.remove(Dialog.Instances, this);\n\n    // If this is the last dialog (being disposed), remove the body listener.\n    if (Dialog.Instances.length === 0) {\n      document.body.removeEventListener('click', Dialog._handleTriggerClick);\n    }\n  }\n\n  /**\n   * Call a function after two animation frames. Using just one is unreliable\n   * when using animations to/from display:none elements or ones that are not\n   * yet in the DOM.\n   * @param {function} fn Function to call on the next frame.\n   */\n  static _nextFrame(fn) {\n    window.requestAnimationFrame(window.requestAnimationFrame.bind(null, fn));\n  }\n\n  /**\n   * Open the correct dialog when an element with `data-odo-dialog-open` attribute\n   * is clicked.\n   * @param {Event} evt Event object.\n   */\n  static _handleTriggerClick(evt) {\n    const elem = evt.target.closest('[data-odo-dialog-open]');\n\n    if (elem !== null) {\n      evt.preventDefault();\n      const id = elem.getAttribute('data-odo-dialog-open');\n      Dialog.getDialogById(id).open();\n    }\n  }\n\n  /**\n   * Trap the focus inside the given element.\n   * @param {Element} node\n   * @param {Event} evt\n   */\n  static _trapTabKey(node, evt) {\n    const focusableChildren = Dialog._getFocusableChildren(node);\n    const focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n    // If the SHIFT key is being pressed while tabbing (moving backwards) and\n    // the currently focused item is the first one, move the focus to the last\n    // focusable item from the dialog element\n    if (evt.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      evt.preventDefault();\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n    } else if (!evt.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      evt.preventDefault();\n    }\n  }\n\n  /**\n   * Get the focusable children of the given element.\n   * @param {Element} element\n   * @return {Array.<Element>}\n   */\n  static _getFocusableChildren(element) {\n    return Array.from(element.querySelectorAll(FOCUSABLE_ELEMENTS))\n      .filter(Dialog._isVisibleElement);\n  }\n\n  /**\n   * Whether an element is visible (and therefore can receive focus). Uses\n   * `getClientRects` due to this issue:\n   * https://github.com/jquery/jquery/issues/2227\n   * http://jsfiddle.net/2tgw2yr3/\n   * @param {Element} el Element.\n   * @return {boolean}\n   */\n  static _isVisibleElement(el) {\n    return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n  }\n\n  /**\n   * Retrieve the siblings of an element.\n   * @param {Element} element Element to get siblings for.\n   * @return {Array.<Element>}\n   */\n  static _getSiblings(element) {\n    const children = Array.from(element.parentNode.children);\n    const ignore = ['script', 'link', 'meta'];\n    return children.filter(\n      node => node !== element && !ignore.includes(node.nodeName.toLowerCase()));\n  }\n\n  /**\n   * Calculate the width of the scrollbar because when the body has overflow:hidden,\n   * the scrollbar disappears.\n   * https://davidwalsh.name/detect-scrollbar-width\n   * @return {number}\n   */\n  static _getScrollbarWidth() {\n    // Create measurement node.\n    const scrollDiv = document.createElement('div');\n    scrollDiv.style.cssText = 'width:50px;height:50px;overflow:scroll;position:absolute;top:-9999px;';\n    document.body.appendChild(scrollDiv);\n\n    // Calculate the scrollbar width.\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    // Remove test element.\n    document.body.removeChild(scrollDiv);\n\n    return scrollbarWidth;\n  }\n\n  /**\n   * Unfortunately, the auto margins do not work for flex children in IE11 and\n   * below because the content element does have an explicit height set on it.\n   * @return {boolean}\n   */\n  static _autoMarginTest() {\n    const parent = document.createElement('div');\n    const child = document.createElement('div');\n    parent.style.cssText = 'display:flex;height:50px;width:50px;position:absolute;';\n    child.style.cssText = 'margin:auto;';\n    child.innerHTML = 'a';\n    parent.appendChild(child);\n    document.body.appendChild(parent);\n\n    const ret = child.offsetTop > 0;\n    document.body.removeChild(parent);\n\n    return ret;\n  }\n\n  /**\n   * Instantiates all instances of dialogs with the same settings\n   * @param {Object} options Object of all dialog options. Is optional.\n   * @return {Array.<Dialog>}\n   * @public\n   */\n  static initializeAll(options) {\n    Dialog.disposeAll();\n\n    return Array.from(\n      document.querySelectorAll('.' + Dialog.Classes.BASE),\n    ).map(dialog => new Dialog(dialog, options));\n  }\n\n  /**\n   * Clear all references to dialogs so there are no duplicates\n   * @param {Object} options Object of all dialog options. Is optional.\n   * @public\n   */\n  static disposeAll() {\n    const clone = Dialog.Instances.slice();\n    clone.forEach((dialog) => {\n      dialog.dispose();\n    });\n  }\n\n  /**\n   * Retrieve a dialog instance by its id.\n   * @param {string} id Id of the dialog.\n   * @return {?Dialog} The dialog or undefined if there is no dialog with the given id.\n   */\n  static getDialogById(id) {\n    return Dialog.Instances.find(instance => instance.id === id);\n  }\n}\n\n/** @enum {string} */\nDialog.Classes = {\n  BODY_OPEN: 'odo-dialog-open',\n  BASE: 'odo-dialog',\n  OPEN: 'odo-dialog--open',\n  ENTER: 'odo-dialog--enter',\n  ENTERING: 'odo-dialog--enter-active',\n  LEAVE: 'odo-dialog--leave',\n  LEAVING: 'odo-dialog--leave-active',\n  VISIBLE: 'odo-dialog--visible',\n  FULLSCREEN: 'odo-dialog--full',\n  NO_AUTO_MARGIN: 'odo-dialog--no-auto-margin',\n  BACKDROP: 'odo-dialog-backdrop',\n  CONTENT: 'odo-dialog__content',\n};\n\n/** @enum {string} */\nDialog.EventType = {\n  OPENED: 'ododialog:open',\n  CLOSED: 'ododialog:closed',\n};\n\n/** @enum {number} */\nDialog.Keys = {\n  ESC: 27,\n  TAB: 9,\n};\n\n/** @type {!Object} */\nDialog.Defaults = {\n  dismissable: true,\n  scrollableElement: '.odo-dialog',\n};\n\n/** @enum {Array} */\nDialog.Instances = [];\n\nDialog.ScrollFix = ScrollFix;\n\n/**\n * Element which had focus before the dialog opened.\n * @type {Element}\n */\nDialog.focusedBeforeDialog = null;\n\nDialog.SUPPORTS_AUTO_MARGINS = Dialog._autoMarginTest();\nDialog.SCROLLBAR_WIDTH = Dialog._getScrollbarWidth();\n\nexport default Dialog;\n"],"names":["body","document","ScrollFix","element","id","startY","scrollY","_createBoundEvents","_registerEvents","_touchStartBound","_onTouchStart","bind","_touchMoveBound","_onTouchMove","_preventDefaultBound","_preventDefault","addEventListener","evt","changedTouches","pageY","scrollTop","deltaY","offsetHeight","scrollHeight","preventDefault","stopPropagation","dispose","removeEventListener","Map","OdoDevice","HAS_TOUCH_EVENTS","string","random","_fixes","set","has","get","delete","FOCUSABLE_ELEMENTS","join","Dialog","opts","Element","TypeError","options","Object","assign","Defaults","getAttribute","backdrop","createElement","className","Classes","BACKDROP","content","getByClass","CONTENT","_closers","Array","from","querySelectorAll","_resizeId","_scrollFixId","isOpen","isAnimating","_hasBodyScrollbar","_originalBodyPadding","_isFullscreen","Instances","push","length","_handleTriggerClick","classList","toggle","NO_AUTO_MARGIN","SUPPORTS_AUTO_MARGINS","_bindContexts","_addA11yAttributes","_ensureBodyChild","name","getElementsByClassName","onKeyPress","onClick","close","tabIndex","setAttribute","parentNode","appendChild","_applyScrollFix","scrollableElement","matches","querySelector","add","_getScrollbarOffset","hasDialogScrollbar","documentElement","clientHeight","SCROLLBAR_WIDTH","dismissable","target","which","Keys","ESC","TAB","_trapTabKey","open","sync","focusedBeforeDialog","activeElement","clientWidth","window","innerWidth","contains","FULLSCREEN","siblings","_getSiblings","originals","map","forEach","i","removeAttribute","OPEN","ENTER","style","paddingRight","BODY_OPEN","insertBefore","nextSibling","focus","_openNext","_opened","_nextFrame","onTransitionEnd","scrollbarOffset","remove","ENTERING","VISIBLE","emit","EventType","OPENED","LEAVE","_closeNext","_closed","LEAVING","removeChild","CLOSED","fn","requestAnimationFrame","elem","closest","getDialogById","node","focusableChildren","_getFocusableChildren","focusedItemIndex","indexOf","shiftKey","filter","_isVisibleElement","el","offsetWidth","getClientRects","children","ignore","includes","nodeName","toLowerCase","_getScrollbarWidth","scrollDiv","cssText","scrollbarWidth","_autoMarginTest","parent","child","innerHTML","ret","offsetTop","initializeAll","disposeAll","BASE","dialog","clone","slice","find","instance","TinyEmitter"],"mappings":"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"}